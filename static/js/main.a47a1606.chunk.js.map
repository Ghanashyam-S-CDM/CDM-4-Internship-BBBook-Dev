{"version":3,"sources":["assets/imgs/spinner.gif","reducers/mainReducer.js","contexts/MainContext.js","utils/SegmentControls/SegmentControls.js","components/Sidemenu/Sidemenu.js","components/Header/Header.js","components/Dashboard/Dashboard.js","utils/Alert/Alert.js","components/Comment/Comment.js","components/MyComponent.js","components/CommentThread/CommentThread.js","helper.js","components/NewQuestionComment/NewQuestionComment.js","utils/Spinner/Spinner.js","utils/PDFRenderer/PDFRenderer.js","components/PdfContainer/PdfContainer.js","components/PdfView/PdfView.js","components/Login/Login.js","components/Groups/Groups.js","components/EditGroup/EditGroup.js","components/App/App.js","serviceWorker.js","index.js","assets/imgs/tab-start.svg","assets/imgs/letter.png","assets/imgs/default-profile-icon.jpg"],"names":["module","exports","modes","mode","url","initState","JSON","stringify","access_token","refresh_token","userId","USERS","GROUPS","BOOKS","COMMENTS","UI_SIDEMENU","UI_DARKMODE","version","state","parse","mainReducer","oldState","actionType","data","reducer","loggedInUsers","cache","reduce","users","groups","books","comments","localStorage","setItem","user","id","getItem","login","removeItem","window","lib","forEach","d","axios","dispatch","MainContext","createContext","nonAlphaNumericRegex","withRouter","children","location","history","useReducer","useState","mounted","setMounted","pathname","indexOf","replace","Provider","value","api","a","post","token","response","status","refresh","r","access","headers","Authorization","SegmentControls","className","vertical","props","val","Number","isInteger","sizeAttr","style","transform","length","map","c","i","key","urlToValue","dashboard","useContext","src","require","alt","width","username","split","to","cursor","onClick","Header","height","setAlert","useEffect","get","then","joined_groups","groupId","g","title","bio","bookId","b","thumbnail","detail","undefined","Alert","alert","whitespaceRegex","Comment","commentBody","commentId","showChildren","editMode","setEditMode","comment","selection","selection_data","console","log","s","document","querySelector","scrollIntoView","behavior","text","marginBottom","Date","created_at","toLocaleString","userid","liked","disliked","replys","maxWidth","body","delete","hidden","hashtag","h","MyComponent","twoWayBind","property","event","valAttr","e","setState","target","Component","onSubmit","preventDefault","match","params","context","trim","book","replyto","typeof","push","comment_set","this","goBack","disableTracksWidthCompensation","required","cols","rows","placeholder","type","contextType","getChildNodeIndex","element","Array","from","parentNode","sidebarModeText","Spinner","pdfjs","workerSrc","PdfImage","memo","page","viewport","setData","canvas","createElement","canvasContext","getContext","render","promise","toDataURL","TextLayer","dangerouslySetInnerHTML","__html","getTextContent","textContent","textDiv","container","textDivs","innerHTML","classList","add","sidebarMode","setSidebarMode","bubblePos","setBubblePos","setSelection","pdf","setPdf","ref","useRef","componentDidMount","componentWillUnmount","pages","onEnter","getSelection","toString","Error","anchorNode","focusNode","closest","startPage","dataset","pageIndex","startLine","startOffset","anchorOffset","endPage","endLine","endOffset","focusOffset","pagesDOM","current","slice","startPageLines","shift","startPageLastLine","pop","innerText","pageLines","pageLastLine","focusNodeClientRect","getBoundingClientRect","scrollNode","top","scrollTop","viewports","_pageIndex","_","pick","data-page-index","path","component","docfile","pdfLoadTask","getDocument","onProgress","loaded","total","promises","numPages","getPage","Promise","all","generateViewports","scale","p","getViewport","userFilter","setUserFilter","searchString","setSearchString","categorized","question","filtered","filter","maxHeight","tabStart","onChange","CommentThread","errorSignUp","errorLogIn","showSpinner","Login","loginResponse","replaceAll","Object","keys","capitalize","signUp","password","password_2","catch","finally","name","EditGroup","Dashboard","Groups","PdfView","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","ReactDOM","getElementById","URL","process","href","origin","addEventListener","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a47a1606.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.3d035a55.gif\";","// import _ from 'lodash'\r\n\r\nconst mode=0\r\nconst modes=[\r\n\t{\r\n\t\tmode: 'dev',\r\n\t\turl: 'https://bbapi-testing.herokuapp.com/bbapi/',\r\n\t},\r\n\t{\r\n\t\tmode: 'prod',\r\n\t\turl: 'https://test-for-bbbook.herokuapp.com/bbapi/',\r\n\t},\r\n]\r\nexport const initState=JSON.stringify({\r\n\taccess_token: null,\r\n\trefresh_token: null,\r\n\tuserId: null,\r\n\r\n\tUSERS:    {},\r\n\tGROUPS:   {},\r\n\tBOOKS:    {},\r\n\tCOMMENTS: {},\r\n\r\n\tUI_SIDEMENU: false,\r\n\tUI_DARKMODE: 'auto', // 'auto',true,false\r\n\r\n\tversion: '0.0.9 '+modes[mode].mode,\r\n\t...modes[mode]\r\n})\r\nexport let state=JSON.parse(initState)\r\n\r\nexport default function mainReducer(oldState,[actionType,data]){\r\n\tstate={...state,...reducer(oldState,actionType,data)}\r\n\tif(mode===0) window.state=state\r\n\treturn state\r\n}\r\n\r\nfunction reducer(state,actionType,data){\r\n\tlet userId,loggedInUsers\r\n\tswitch(actionType){\r\n\t\tcase 'SET_STATE': return data\r\n\t\tcase 'SET_UI_SIDEMENU': return {UI_SIDEMENU: data}\r\n\t\tcase 'SET_UI_DARKMODE': return {UI_DARKMODE: data}\r\n\t\tcase 'SET_DATA':\r\n\t\t\tconst cache={\r\n\t\t\t\tUSERS   : {...state.USERS   ,...(reduce(data.users    ?? []))}, // eslint-disable-line no-whitespace-before-property\r\n\t\t\t\tGROUPS  : {...state.GROUPS  ,...(reduce(data.groups   ?? []))}, // eslint-disable-line no-whitespace-before-property\r\n\t\t\t\tBOOKS   : {...state.BOOKS   ,...(reduce(data.books    ?? []))}, // eslint-disable-line no-whitespace-before-property\r\n\t\t\t\tCOMMENTS: {...state.COMMENTS,...(reduce(data.comments ?? []))}, // eslint-disable-line no-whitespace-before-property\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem('cache',JSON.stringify(cache)) // TODO: Cache size limiting, preserve logged in users\r\n\t\t\treturn cache\r\n\t\tcase 'LOGIN':\r\n\t\t\tconst {access_token,refresh_token}=data\r\n\t\t\tuserId=data.user.id\r\n\t\t\tlocalStorage.setItem('activeUserId',userId)\r\n\t\t\tlocalStorage.setItem('loggedInUsers',JSON.stringify({\r\n\t\t\t\t...JSON.parse(localStorage.getItem('loggedInUsers') || '{}'),\r\n\t\t\t\t[userId]: [access_token,refresh_token]\r\n\t\t\t}))\r\n\t\t\treturn {\r\n\t\t\t\taccess_token,\r\n\t\t\t\trefresh_token,\r\n\t\t\t\tuserId,\r\n\t\t\t\t...reducer(state,'SET_DATA',{users: [data.user]}),\r\n\t\t\t}\r\n\t\tcase 'REFRESH':\r\n\t\t\tloggedInUsers=JSON.parse(localStorage.getItem('loggedInUsers'))\r\n\t\t\tloggedInUsers[state.userId][0]=data\r\n\t\t\treturn {access_token: data}\r\n\t\tcase 'RE_LOGIN':\r\n\t\t\tuserId=localStorage.getItem('activeUserId')\r\n\t\t\tconst login=JSON.parse(localStorage.getItem('loggedInUsers'))[userId]\r\n\t\t\treturn{\r\n\t\t\t\taccess_token: login[0],\r\n\t\t\t\trefresh_token: login[1],\r\n\t\t\t\tuserId,\r\n\t\t\t\t...JSON.parse(localStorage.getItem('cache'))\r\n\t\t\t}\r\n\t\tcase 'LOGOUT':\r\n\t\t\tlocalStorage.removeItem('activeUserId')\r\n\t\t\tloggedInUsers=JSON.parse(localStorage.getItem('loggedInUsers'))\r\n\t\t\tdelete loggedInUsers[state.userId]\r\n\t\t\tlocalStorage.setItem('loggedInUsers',JSON.stringify(loggedInUsers))\r\n\t\t\treturn JSON.parse(initState)\r\n\t\tdefault: return {}\r\n\t}\r\n}\r\n\r\nfunction reduce(data){\r\n\tconst lib={}\r\n\tdata.forEach(d=>lib[d.id]=d)\r\n\treturn lib\r\n}\r\n","import React,{createContext,useReducer,useState} from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\n// import _ from 'lodash'\r\n\r\nimport mainReducer,{initState,state} from '../reducers/mainReducer'\r\n\r\nwindow.axios=axios\r\nexport const MainContext=createContext(JSON.parse(initState))\r\nexport let dispatch\r\nexport const nonAlphaNumericRegex=/[^A-Za-z0-9 ]+/g\r\n\r\nexport default withRouter(function MainContextProvider({children,location,history}){\r\n\tlet state\r\n\t([state,dispatch]=useReducer(mainReducer,JSON.parse(initState)))\r\n\tconst [mounted,setMounted]=useState(false)\r\n\r\n\tif(!localStorage.getItem('activeUserId')){\r\n\t\t(location.pathname.indexOf('/login')=== -1) && history.replace(location.pathname+'/login')\r\n\t}else if(!mounted){\r\n\t\tdispatch(['RE_LOGIN'])\r\n\t}\r\n\r\n\tif(!mounted) setMounted(true)\r\n\treturn (\r\n\t\t<MainContext.Provider value={{state,dispatch}}>{children}</MainContext.Provider>\r\n\t)\r\n})\r\n\r\nexport async function api(mode,url,data,config={}){\r\n\t// console.log(mode,url,data,config)\r\n\tlet {access_token}=state\r\n\ttry{\r\n\t\tawait axios.post(state.url+'token/verify/',{token: access_token})\r\n\t}catch(e){\r\n\t\tif(e.response.status===401){\r\n\t\t\tconst r=await axios.post(state.url+'token/refresh/',{refresh: state.refresh_token})\r\n\t\t\taccess_token=r.data.access\r\n\t\t\tdispatch(['REFRESH',access_token])\r\n\t\t}\r\n\t}\r\n\r\n\treturn axios[mode](state.url+url+'/',data,{headers: {Authorization: 'Bearer '+access_token}})\r\n}\r\n","import React,{Fragment} from 'react'\r\n// import _ from 'lodash'\r\n\r\nimport './SegmentControls.scss'\r\n\r\nexport default function SegmentControls({value,className,children,vertical,...props}){\r\n\tconst val=Number.isInteger(value)?value:-1\r\n\tconst sizeAttr=vertical?'height':'width'\r\n\treturn (\r\n\t\t<div {...props} className={'segment-controls row '+className}>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"highlight\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\ttransform: vertical?`translateY(${val*100}%)`:`translateX(${val*100}%)`,\r\n\t\t\t\t\t[sizeAttr]: 100/children.length+'%',\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{children.map((c,i)=><Fragment key={i}>{c}</Fragment>)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React,{useContext} from 'react'\r\nimport {NavLink,withRouter} from 'react-router-dom'\r\n\r\nimport './Sidemenu.scss'\r\nimport {MainContext} from '../../contexts/MainContext'\r\nimport SegmentControls from '../../utils/SegmentControls/SegmentControls'\r\n\r\nconst urlToValue={\r\n\tdashboard: 0,\r\n\tgroups: 1,\r\n\t// library: 1,\r\n\t// favorites: 1,\r\n\t// connections: 1,\r\n\t// settings: 1,\r\n}\r\n\r\n// MAYBE: Hover segment controls\r\nexport default withRouter(function Sidemenu({history,location}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tconst user=state.USERS[state.userId]\r\n\treturn (\r\n\t\t<section id=\"Sidemenu\" className={'f-vert p-8 pos-abs stretch-to-fit'+(state.UI_SIDEMENU?' active':'')}>\r\n\t\t\t<div className=\"col\"/>\r\n\t\t\t<div className=\"row f-vert spc-12 mb-12\">\r\n\t\t\t\t<img className=\"profile-icon f-self-center\" src={require('../../assets/imgs/default-profile-icon.jpg')} alt=\"default-profile-icon\"/>\r\n\t\t\t\t<div className=\"text-center col-12\" style={{width: 'calc(100% - 72px)'}}>\r\n\t\t\t\t\t<div className=\"one-line\">\r\n\t\t\t\t\t\tFirstname Lastname\r\n\t\t\t\t\t\t{/*{user?user.first_name:'Firstname'}*/}\r\n\t\t\t\t\t\t{/*{user?user.last_name:'Lastname'}*/}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"h7 text-muted\">{user?user.username:'@Username'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<SegmentControls className=\"f-vert\" value={urlToValue[location.pathname.split('/')[1]] || 0} vertical={true}>\r\n\t\t\t\t<NavLink to=\"/dashboard\" className=\"p-12\">Dashboard</NavLink>\r\n\t\t\t\t{/*<Link to=\"/library\" className=\"p-12\">My Dashboard</Link>*/}\r\n\t\t\t\t{/*<Link to=\"/favorites\" className=\"p-12\">Favorites</Link>*/}\r\n\t\t\t\t{/*<Link to=\"/connections\" className=\"p-12\">My Connections</Link>*/}\r\n\t\t\t\t<NavLink to=\"/groups\" className=\"p-12\">Groups</NavLink>\r\n\t\t\t\t{/*<Link to=\"/settings\" className=\"p-12\">Account settings</Link>*/}\r\n\t\t\t\t{/*<Link className=\"p-12\">Switch account</Link>*/}\r\n\t\t\t\t{/*<Link to=\"\" className=\"p-12\">&nbsp;</Link>*/}\r\n\t\t\t</SegmentControls>\r\n\t\t\t<div className=\"col\"/>\r\n\t\t\t<div className=\"h7 text-center mb-12\" style={{cursor: 'pointer'}} onClick={logout}><i className=\"icon icon-signout\"/> Logout</div>\r\n\t\t</section>\r\n\t)\r\n\r\n\tfunction logout(){\r\n\t\tdispatch(['LOGOUT'])\r\n\t}\r\n})","import React,{useContext} from 'react'\r\n\r\nimport './Header.scss'\r\nimport {MainContext} from '../../contexts/MainContext'\r\n\r\nexport default function Header({children}){\r\n\tconst {state}=useContext(MainContext)\r\n\r\n\treturn (\r\n\t\t<header className=\"Header row spc-x-8 f-center pos-sty f-order-m1\">\r\n\t\t\t<h3 className=\"logo small-caps f-center ml-12\">\r\n\t\t\t\t<span className=\"b-800\">BB</span>B<span className=\"b-600\">ook</span>\r\n\t\t\t\t<sup className=\"h7 normal-caps ml-4\" style={{height: 'auto'}}>Pre-Alpha <b className=\"b-900\">{state.version}</b></sup>\r\n\t\t\t</h3>\r\n\t\t\t{children}\r\n\t\t\t{/*<SegmentControls className=\"ml-16\" value={1}>*/}\r\n\t\t\t{/*\t<div className=\"super-center px-16\">Discover</div>*/}\r\n\t\t\t{/*\t<div className=\"super-center px-16 active\">Dashboard</div>*/}\r\n\t\t\t{/*</SegmentControls>*/}\r\n\t\t\t{/*<div className=\"col\"/>*/}\r\n\t\t\t{/*<input className=\"col mx-8\" type=\"search\"/>*/}\r\n\t\t\t{/*<button className=\"new-group-button mr-16 f-center\">New Group</button>*/}\r\n\t\t\t{/*<div className=\"text-right\">*/}\r\n\t\t\t{/*\tFirstname Lastname*/}\r\n\t\t\t{/*\t<div className=\"h7 text-muted\">@Username</div>*/}\r\n\t\t\t{/*</div>*/}\r\n\t\t\t{/*<img*/}\r\n\t\t\t{/*\tclassName=\"profile-icon\"*/}\r\n\t\t\t{/*\tsrc={require('../../assets/imgs/default-profile-icon.jpg')}*/}\r\n\t\t\t{/*\talt=\"default-profile-icon\"*/}\r\n\t\t\t{/*\tonClick={()=>dispatch(['SET_UI_SIDEMENU',!state.UI_SIDEMENU])}/>*/}\r\n\t\t</header>\r\n\t)\r\n}\r\n","import React,{useContext,useEffect} from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport './Dashboard.scss'\r\nimport Header from '../Header/Header'\r\nimport {MainContext} from '../../contexts/MainContext'\r\n\r\nexport default withRouter(function Dashboard({location}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tuseEffect(refresh,[location.pathname])\r\n\tconst user=state.USERS[state.userId]\r\n\r\n\tfunction refresh(){\r\n\t\tif(!state.userId) return\r\n\t\taxios.get(state.url+'dashboard/'+state.userId).then(({data})=>{\r\n\t\t\tdispatch(['SET_DATA',data])\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div id=\"Dashboard\" className=\"pos-abs stretch-to-fit\">\r\n\t\t\t<Header>\r\n\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t<div className=\"icon icon-refresh super-center\" onClick={refresh}/>\r\n\t\t\t</Header>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t{(user?.joined_groups || []).map(groupId=>{\r\n\t\t\t\t\tconst g=state.GROUPS[groupId]\r\n\t\t\t\t\treturn g?(\r\n\t\t\t\t\t\t<div key={groupId} className=\"group row spc-16\">\r\n\t\t\t\t\t\t\t<div className=\"title col-12 pb-12 pos-rel\">\r\n\t\t\t\t\t\t\t\t<img className=\"mr-12\" src={require('../../assets/imgs/letter.png')} alt=\"Group icon\"/>\r\n\t\t\t\t\t\t\t\t<h3>{g.title}</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"h7 text-muted one-line\">{g.bio}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{g.books.map(bookId=>{\r\n\t\t\t\t\t\t\t\tconst b=state.BOOKS[bookId]\r\n\t\t\t\t\t\t\t\treturn b?(\r\n\t\t\t\t\t\t\t\t\t<Link to={'/pdf/'+bookId} className=\"col-3 col-2-xl book\" key={bookId}>\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"col-12 card\" src={b.thumbnail || require('../../assets/imgs/letter.png')} alt=\"Book placeholder\"/>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"pt-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"one-line\">{b.title}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"h7 text-muted one-line\">{b.detail}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t):undefined\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t):undefined\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})\r\n","import React,{useState} from 'react'\r\n\r\nexport let setAlert\r\n\r\nexport default function Alert(){\r\n\tlet alert\r\n\t[alert,setAlert]=useState()\r\n\treturn (\r\n\t\t<div id=\"Alert\" className={'modal'+(alert?' active':' ')}>{alert}</div>\r\n\t)\r\n}","import React,{useContext,useState} from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport './Comment.scss'\r\nimport {MainContext,api} from '../../contexts/MainContext'\r\nimport {setAlert} from '../../utils/Alert/Alert'\r\n\r\nconst whitespaceRegex=/\\s+/\r\n\r\n// TODO: CommentBody\r\n// TODO: Right-click\r\nexport default withRouter(function Comment({location,children,commentId,showChildren}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tconst [editMode,setEditMode]=useState()\r\n\r\n\tconst comment=state.COMMENTS[commentId]\r\n\tconst user=state.USERS[comment?.user]\r\n\tconst {userId}=state\r\n\r\n\tlet commentBody\r\n\r\n\tif(comment){\r\n\t\tconst selection=JSON.parse(comment?.selection_data)\r\n\t\tconsole.log(selection)\r\n\t\tcommentBody=<>\r\n\t\t\t{/* TODO: selectionIndex data redesign */}\r\n\t\t\t{/* TODO: remove onCLick workaround after node.js backend */}\r\n\t\t\t{selection.map(s=><blockquote className=\"h7 text-muted mt-2 row cur-p\" onClick={()=>document.querySelector(`#a${commentId}0>span`)?.scrollIntoView({behavior: 'smooth'})}>\r\n\t\t\t\t<div className=\"trim-y col\">{s.text}</div>\r\n\t\t\t</blockquote>)}\r\n\t\t\t{userId+''===comment.user+''?<div className=\"h7 b-700\" style={{marginBottom: '-21px !important'}}>\r\n\t\t\t\t<i className=\"fa fa-plus\"/> Add Highlight\r\n\t\t\t</div>:undefined}\r\n\t\t\t<div className=\"h8 my-2 text-right\">{(new Date(comment.created_at)).toLocaleString()}</div> {/* TODO: Beautify */}\r\n\t\t\t<div className=\"bottom-row col-ext-x col-ext-b row spc-8 spc-x-12 f-center\">\r\n\t\t\t\t<i className=\"icon icon-arrow_big_up\" onClick={like}/><div className=\"h7 ml-0\">{comment.liked.length}</div>\r\n\t\t\t\t<i className=\"icon icon-arrow_big_down text-muted\"/><div className=\"h7 ml-0\">{comment.disliked.length}</div>\r\n\t\t\t\t{/*<i className=\"fa fa-star text-muted h6\"/>*/}\r\n\t\t\t\t<i className=\"icon icon-reply h6\"/><div className=\"h7 ml-0\">{comment.replys.length}</div>\r\n\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t<Link className=\"button super-center\" to={location?.pathname+'/thread/'+commentId}>Open Thread</Link>\r\n\t\t\t\t{userId+''===comment.user+''?<>\r\n\t\t\t\t\t{editMode?<div className=\"edit-form-open pos-abs stretch-to-fit\" onClick={()=>setEditMode(false)}/>:undefined}\r\n\t\t\t\t\t<div className=\"px-12 py-8 col-ext pos-rel f-self-stretch f-center cur-p\" onClick={()=>setEditMode(true)}>\r\n\t\t\t\t\t\t<i className=\"fa fa-ellipsis-v\"/>\r\n\t\t\t\t\t\t<div className={'edit-form pos-abs card trim'+(editMode?' active':' ')}>\r\n\t\t\t\t\t\t\t<div className=\"px-12 py-8 f-center\" onClick={deleteComment}><i className=\"icon-cross_mark mr-8\"/>Delete</div>\r\n\t\t\t\t\t\t\t{/*<div className=\"px-12 py-8\">Edit</div>*/}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>:undefined}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<style>{`\r\n\t\t\t\t.custom-highlight-layer>.a${commentId}{ display: block !important }\r\n\t\t\t`}</style>\r\n\t\t\t\t<div className=\"Comment\">\r\n\t\t\t\t\t<div id={`b${commentId}`} className=\"id-tag\"/>\r\n\t\t\t\t\t<div className=\"row pb-4\">\r\n\t\t\t\t\t\t{comment.hidden?undefined:<>\r\n\t\t\t\t\t\t\t<div className=\"h7 hashtag\">{comment.hashtag.split(whitespaceRegex).map((h,i)=><span key={i} className=\"mr-4\">#{h}</span>)}</div>\r\n\t\t\t\t\t\t</>}\r\n\t\t\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t\t\t<div className=\"h7 text-muted\">@{user.username}</div>\r\n\t\t\t\t\t\t<img className=\"pos-rel\" src={require('../../assets/imgs/default-profile-icon.jpg')} alt=\"User icon\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"card row f-vert spc-12\">\r\n\t\t\t\t\t\t<div className=\"o ne-line\">{comment.hidden?'[Deleted]':comment.body}</div>\r\n\t\t\t\t\t\t{comment.hidden?undefined:commentBody}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showChildren && (children || !!comment?.replys.length) &&\r\n\t\t\t\t<div className=\"reply col-ext row spc-12\">\r\n\t\t\t\t\t<div className=\"col col-ext-x col-ext-t row spc-12 f-vert\">\r\n\t\t\t\t\t\t{comment?.replys.map(c=><Comment key={c} {...{commentId: c,showChildren}}/>)}\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</>\r\n\t\t)\r\n\t}else return undefined\r\n\r\n\tfunction like(){\r\n\t\tapi('put',state.url+'like/'+commentId,undefined,{headers:{\r\n\t\t\tuserid: userId\r\n\t\t}}).then(({data})=>{\r\n\t\t\tconsole.log(data)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction deleteComment(){\r\n\t\t// TODO: Use commentBody\r\n\t\tsetAlert(\r\n\t\t\t<div className=\"row spc-12\" style={{maxWidth: '320px'}}>\r\n\t\t\t\t<div className=\"col-12\">Do you want to delete this comment?</div>\r\n\t\t\t\t<div className=\"close-btn\" onClick={()=>setAlert()}/>\r\n\t\t\t\t<div className=\"Comment card col-12 row f-vert spc-12\">\r\n\t\t\t\t\t<div className=\"o ne-line\">{comment.body}</div>\r\n\t\t\t\t\t<blockquote className=\"h7 text-muted mt-2 row\">\r\n\t\t\t\t\t\t<div className=\"trim-y col\">{comment.selection_data}</div>\r\n\t\t\t\t\t</blockquote>\r\n\t\t\t\t\t<div className=\"h8 my-2 text-right\">{(new Date(comment.created_at)).toLocaleString()}</div> {/* TODO: Beautify */}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end\">\r\n\t\t\t\t\t<button className=\"outline\" onClick={()=>setAlert()}>Cancel</button>\r\n\t\t\t\t\t<button onClick={()=>{\r\n\t\t\t\t\t\taxios.delete(state.url+'comment/'+commentId).then(({data})=>{\r\n\t\t\t\t\t\t\tsetAlert()\r\n\t\t\t\t\t\t\tdispatch(['SET_DATA',{comments: [data]}])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}}>OK</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n})\r\n","import {Component} from 'react'\r\n\r\nexport default class MyComponent extends Component{\r\n\t// Used for simple 2-way binding\r\n\t// eg: <input {...this.twoWayBind('stateVariable')}/> will return\r\n\t// <input value={this.state['stateVariable']} onChange={e=>this.setState({'stateVariable':e.target.value}}/>\r\n\t// TODO: Finish comment for different params\r\n\ttwoWayBind=(property,event='onChange',valAttr='value')=>({\r\n\t\t[valAttr]:this.state[property],\r\n\t\t[event]:e=>this.setState({[property]:e.target[valAttr]}),\r\n\t})\r\n}","import React from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {Scrollbar} from 'react-scrollbars-custom'\r\nimport axios from 'axios'\r\n\r\nimport './CommentThread.scss'\r\nimport Comment from '../Comment/Comment'\r\nimport MyComponent from '../MyComponent'\r\nimport {MainContext,nonAlphaNumericRegex} from '../../contexts/MainContext'\r\n\r\nconst initState=JSON.stringify({\r\n\tbody: '',\r\n\thashtag: '',\r\n})\r\nexport default withRouter(class CommentThread extends MyComponent{\r\n\tstatic contextType=MainContext\r\n\tstate=JSON.parse(initState)\r\n\r\n\tonSubmit=e=>{\r\n\t\te.preventDefault()\r\n\t\tconst commentId=this.props.match.params.id\r\n\t\tconst {body,hashtag}=this.state\r\n\t\tconst {COMMENTS,BOOKS,userId,url}=this.context.state\r\n\t\tconst comment=COMMENTS[commentId]\r\n\t\taxios.post(url+'comment',{\r\n\t\t\tbody,\r\n\t\t\thashtag: hashtag.replace(nonAlphaNumericRegex,'').trim(),\r\n\t\t\tuser: userId,\r\n\t\t\tbook: comment.book,\r\n\t\t\treplyto: commentId,\r\n\t\t\ttypeof: 'reply'\r\n\t\t}).then(({data})=>{\r\n\t\t\tCOMMENTS[commentId].replys.push(data.id)\r\n\t\t\tconsole.log({comments: [data,COMMENTS[commentId]]})\r\n\t\t\tconst book=BOOKS[comment.book]\r\n\t\t\tbook.comment_set.push(data.id)\r\n\t\t\tthis.context.dispatch(['SET_DATA',{comments: [data,COMMENTS[commentId]],books: [book]}])\r\n\t\t\tthis.setState(JSON.parse(initState))\r\n\t\t})\r\n\t}\r\n\r\n\trender(){\r\n\t\t// console.log(this.props)\r\n\t\tconst {onSubmit}=this\r\n\t\tconst {history,match}=this.props\r\n\t\tconst commentId=match.params.id\r\n\t\tconst {userId,USERS}=this.context.state\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"CommentThread pos-abs stretch-to-fit row spc-12 f-justify-end\">\r\n\t\t\t\t<div className=\"p-12 f-start f-justify-end f-self-start\">\r\n\t\t\t\t\t<div className=\"h5 icon icon-cross_mark\" onClick={history.goBack} style={{cursor: 'pointer'}}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Scrollbar disableTracksWidthCompensation className=\"thread-container col\" style={{height: 'auto'}}>\r\n\t\t\t\t\t<div className=\"row spc-12 f-vert pos-rel\">\r\n\t\t\t\t\t\t<Comment {...{commentId,showChildren: true}}>\r\n\t\t\t\t\t\t\t<div className=\"reply-input\">\r\n\t\t\t\t\t\t\t\t<div className=\"top-row row pb-4 f-justify-end\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 text-muted\">@{USERS[userId]?.username || 'Username'}</div>\r\n\t\t\t\t\t\t\t\t\t<img className=\"pos-rel\" src={require('../../assets/imgs/default-profile-icon.jpg')} alt=\"User icon\"/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<form className=\"form row spc-12\" {...{onSubmit}}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 col-12 my-2\">Add reply</div>\r\n\t\t\t\t\t\t\t\t\t<textarea required className=\"col-12\" cols=\"30\" rows=\"10\" placeholder=\"Reply\" {...this.twoWayBind('body')}/>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"col\" placeholder=\"#Hashtag\" {...this.twoWayBind('hashtag')}/>\r\n\t\t\t\t\t\t\t\t\t<button>Post</button>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Comment>\r\n\t\t\t\t\t\t{/*<div style={{height: '1000px'}}/>*/}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Scrollbar>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n})\r\n","export function getChildNodeIndex(element){\r\n\treturn Array.from(element.parentNode.children).indexOf(element)\r\n}","import React from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport './NewQuestionComment.scss'\r\nimport MyComponent from '../MyComponent'\r\nimport {MainContext,nonAlphaNumericRegex,api} from '../../contexts/MainContext'\r\n\r\nconst initState=JSON.stringify({\r\n\tbody: '',\r\n\thashtag: '',\r\n})\r\nexport default withRouter(class NewQuestionComment extends MyComponent{\r\n\tstatic contextType=MainContext\r\n\tstate=JSON.parse(initState)\r\n\r\n\tonSubmit=e=>{\r\n\t\te.preventDefault()\r\n\r\n\t\tconst {sidebarModeText,selection,book,history}=this.props\r\n\t\tconst {body,hashtag}=this.state\r\n\t\tconst {userId,url}=this.context.state\r\n\r\n\t\tapi('post','comment',{\r\n\t\t\tbody,\r\n\t\t\thashtag: hashtag.replace(nonAlphaNumericRegex,'').trim(),\r\n\t\t\tselection_data: JSON.stringify([selection]),\r\n\t\t\tuser: userId,\r\n\t\t\tbook: book.id,\r\n\t\t\ttypeof: sidebarModeText,\r\n\t\t}).then(({data})=>{\r\n\t\t\tbook.comment_set.push(data.id)\r\n\t\t\tthis.context.dispatch(['SET_DATA',{comments: [data],books: [book]}])\r\n\t\t\t// TODO: resetSelection\r\n\t\t\thistory.goBack()\r\n\t\t})\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst {onSubmit}=this\r\n\t\tconst {sidebarModeText,history,selection}=this.props // eslint-disable-line no-unused-vars\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"NewQuestionComment modal active pos-abs stretch-to-fit p-12 f-end f-justify-center\" style={{}}>\r\n\t\t\t\t<form className=\"row spc-12\" style={{width: '480px'}} {...{onSubmit}}>\r\n\t\t\t\t\t<div className=\"close-btn\" onClick={history.goBack}/>\r\n\t\t\t\t\t<div className=\"capitalize\">New {sidebarModeText}</div>\r\n\t\t\t\t\t<blockquote className=\"col-12 h7 text-muted mt-2 row\">\r\n\t\t\t\t\t\t<div className=\"trim-y col\">{selection?.text}</div>\r\n\t\t\t\t\t</blockquote>\r\n\t\t\t\t\t<textarea required className=\"col-12\" placeholder={sidebarModeText} {...this.twoWayBind('body')}/>\r\n\t\t\t\t\t<div className=\"col-12\"/>\r\n\t\t\t\t\t<div className=\"bottom-row col-12 col-ext row spc-12\">\r\n\t\t\t\t\t\t<input className=\"col\" type=\"text\" placeholder=\"#Hashtag\" {...this.twoWayBind('hashtag')}/>\r\n\t\t\t\t\t\t<button>Post</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n})\r\n","import React from 'react'\r\n\r\nimport './Spinner.scss'\r\n\r\n// TODO: change className to active\r\nexport default function Spinner({className}){\r\n\treturn (\r\n\t\t<div className={'spinner pos-abs stretch-to-fit super-center '+className}>\r\n\t\t\t<img className=\"p-8\" src={require('../../assets/imgs/spinner.gif')} alt=\"Spinner\"/>\r\n\t\t</div>\r\n\t)\r\n}","import React,{memo,useState} from 'react'\r\nimport * as pdfjs from 'pdfjs-dist'\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`\r\n\r\nexport default pdfjs\r\n\r\nexport const PdfImage=memo(function({page,viewport}){\r\n\tconst [data,setData]=useState(undefined)\r\n\tif(!data){\r\n\t\tconst canvas=document.createElement('canvas')\r\n\t\tconst canvasContext=canvas.getContext('2d')\r\n\t\tcanvas.height=viewport.height\r\n\t\tcanvas.width=viewport.width\r\n\r\n\t\tpage.render({canvasContext,viewport}).promise.then(()=>setData(canvas.toDataURL()))\r\n\t\t// TODO: Page load spinner\r\n\t}else\r\n\t\treturn <img src={data} alt=\"\"/>\r\n})\r\n\r\nexport const TextLayer=memo(function({page,viewport}){\r\n\tconst [data,setData]=useState(undefined)\r\n\tif(!data){\r\n\t\tpage.getTextContent().then(textContent=>{\r\n\t\t\t// console.log(textContent)\r\n\t\t\tconst textDiv=document.createElement('div')\r\n\t\t\tpdfjs.renderTextLayer({\r\n\t\t\t\ttextContent,\r\n\t\t\t\tcontainer: textDiv,\r\n\t\t\t\tviewport,\r\n\t\t\t\ttextDivs:  [],\r\n\t\t\t}).promise.then(()=>setData(textDiv.innerHTML))\r\n\t\t\t// console.log(textDiv,textDiv.outerHTML)\r\n\t\t\t// setData(textDiv.outerHTML)\r\n\t\t\t// TODO: Page load spinner\r\n\t\t})\r\n\t}else\r\n\t\treturn <div className=\"text-layer pos-abs stretch-to-fit\" dangerouslySetInnerHTML={{__html: data}}/>\r\n})","import React,{useState,useRef,useEffect} from 'react'\r\nimport {Link,withRouter,Route} from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport {Scrollbar} from 'react-scrollbars-custom'\r\nimport ScrollTrigger from 'react-scroll-trigger'\r\n\r\nimport './PdfContainer.scss'\r\nimport {getChildNodeIndex} from '../../helper'\r\nimport NewQuestionComment from '../NewQuestionComment/NewQuestionComment'\r\n// import SegmentControls from '../../utils/SegmentControls/SegmentControls'\r\nimport Spinner from '../../utils/Spinner/Spinner'\r\nimport {state} from '../../reducers/mainReducer'\r\nimport pdfjs,{PdfImage,TextLayer} from '../../utils/PDFRenderer/PDFRenderer'\r\n\r\n// TODO: Extra - PDF download progressbar\r\n// TODO: Extra - Password protected PDFs\r\n\r\n// TODO: Maybe remove\r\nconst customHighlightLayer=document.createElement('div')\r\ncustomHighlightLayer.classList.add('custom-highlight-layer','pos-abs','stretch-to-fit')\r\nconst isArray=a=>(!!a) && a.constructor===Array\r\n\r\nexport default withRouter(function PdfContainer({className,sidebarMode,setSidebarMode,sidebarModeText,location,book}){\r\n\tconst [bubblePos,setBubblePos]=        useState({}) // New comment bubble position\r\n\tconst [selection,setSelection]=        useState(undefined)\r\n\tconst [pdf,setPdf]=                    useState({})\r\n\tconst ref=useRef()\r\n\tuseEffect(()=>{\r\n\t\tcomponentDidMount()\r\n\t\treturn componentWillUnmount\r\n\t},[]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\tconst numPages=pdf.pages?.length || 0\r\n\r\n\tconsole.log('PdfContainer render')\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Scrollbar className=\"PdfContainer\" disableTracksWidthCompensation>\r\n\t\t\t\t<ScrollTrigger className=\"row f-center f-vert spc-12\" {...{onEnter,onClick,ref}}>\r\n\t\t\t\t\t{pdf.pages?.map((page,i)=>{\r\n\t\t\t\t\t\tconst viewport=pdf.viewports[i]\r\n\t\t\t\t\t\treturn <div key={page._pageIndex} className=\"card pos-rel f-super-center trim page\" style={_.pick(viewport,['width','height'])} data-page-index={i}>\r\n\t\t\t\t\t\t\t<PdfImage {...{page,viewport}}/>\r\n\t\t\t\t\t\t\t<TextLayer {...{page,viewport}}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ScrollTrigger>\r\n\t\t\t\t<div className=\"new-bubble pos-abs f-end f-justify-center h7 pt-4\" style={bubblePos}>\r\n\t\t\t\t\t<Link to={location.pathname+'/new-comment'} className=\"py-4 px-8\" onClick={()=>setSidebarMode(1)}>Comment</Link>\r\n\t\t\t\t\t<Link to={location.pathname+'/new-question'} className=\"py-4 px-8\" onClick={()=>setSidebarMode(0)}>Question</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</Scrollbar>\r\n\t\t\t{/*<SegmentControls className=\"pos-abs stretch-to-fit mx-auto spc-6 mode\" value={pdfMode}>*/}\r\n\t\t\t{/*\t<div className=\"p-6 text-center\" onClick={()=>setPdfMode(0)}>Reading Mode</div>*/}\r\n\t\t\t{/*\t<div className=\"p-6 text-center\" onClick={()=>setPdfMode(1)}>Highlight Mode</div>*/}\r\n\t\t\t{/*</SegmentControls>*/}\r\n\t\t\t<Spinner className={pdf.pdf?'':'active'}/>\r\n\t\t\t<Route path=\"*/new-comment\" component={props=><NewQuestionComment {...{props,sidebarModeText,selection,book}}/>}/>\r\n\t\t\t<Route path=\"*/new-question\" component={props=><NewQuestionComment {...{props,sidebarModeText,selection,book}}/>}/>\r\n\t\t</>\r\n\t)\r\n\r\n\tasync function componentDidMount(){\r\n\t\tconsole.log('PdfContainer componentDidMount')\r\n\t\tif(book?.docfile){\r\n\t\t\tconst pdfLoadTask=pdfjs.getDocument(book.docfile)\r\n\t\t\tpdfLoadTask.onProgress=({loaded,total})=>console.log(loaded/total*100)\r\n\t\t\tconsole.log(pdfLoadTask)\r\n\t\t\tconst pdf=await pdfLoadTask.promise\r\n\t\t\t// console.log(pdf)\r\n\t\t\tconst promises=new Array(pdf.numPages)\r\n\t\t\tfor(let i=0;i<pdf.numPages;++i) promises[i]=pdf.getPage(i+1)\r\n\t\t\tconst pages=await Promise.all(promises)\r\n\t\t\tconst viewports=generateViewports(pages,1.5)\r\n\t\t\tconsole.log(pages,viewports)\r\n\t\t\tsetPdf({pdf,pages,viewports})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction generateViewports(pages,scale){\r\n\t\treturn pages.map(p=>p.getViewport({scale}))\r\n\t}\r\n\r\n\tfunction componentWillUnmount(){\r\n\t\tconsole.log('PdfContainer componentWillUnmount')\r\n\t}\r\n\r\n\tfunction onClick(){\r\n\t\ttry{\r\n\t\t\tconst s=window.getSelection()\r\n\t\t\tif(s.toString()==='') throw new Error('No text selected')\r\n\t\t\tlet {anchorNode,focusNode}=s\r\n\t\t\twhile(!anchorNode.closest) anchorNode=anchorNode.parentNode\r\n\t\t\twhile(!focusNode.closest) focusNode=focusNode.parentNode\r\n\r\n\t\t\tlet selection={\r\n\t\t\t\tstartPage: anchorNode.closest('.page').dataset.pageIndex,\r\n\t\t\t\tstartLine: getChildNodeIndex(anchorNode),\r\n\t\t\t\tstartOffset: s.anchorOffset,\r\n\t\t\t\tendPage: focusNode.closest('.page').dataset.pageIndex,\r\n\t\t\t\tendLine: getChildNodeIndex(focusNode),\r\n\t\t\t\tendOffset: s.focusOffset,\r\n\t\t\t}\r\n\r\n\t\t\t// if selection is in reverse order, swap selection start and end\r\n\t\t\tif(\r\n\t\t\t\tselection.endPage<selection.startPage ||       // eslint-disable-line no-mixed-operators\r\n\t\t\t\tselection.endPage===selection.startPage && (   // eslint-disable-line no-mixed-operators\r\n\t\t\t\t\tselection.endLine<selection.startLine ||     // eslint-disable-line no-mixed-operators\r\n\t\t\t\t\tselection.endLine===selection.startLine && ( // eslint-disable-line no-mixed-operators\r\n\t\t\t\t\t\tselection.endOffset<selection.startOffset  // eslint-disable-line no-mixed-operators\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t){\r\n\t\t\t\tselection={\r\n\t\t\t\t\tstartPage:   selection.endPage,\r\n\t\t\t\t\tstartLine:   selection.endLine,\r\n\t\t\t\t\tstartOffset: selection.endOffset,\r\n\t\t\t\t\tendPage:     selection.startPage,\r\n\t\t\t\t\tendLine:     selection.startLine,\r\n\t\t\t\t\tendOffset:   selection.startOffset,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: Add selection type\r\n\t\t\tconst pagesDOM=Array.from(ref.current.element.children).slice(\r\n\t\t\t\tselection.startPage,\r\n\t\t\t\tselection.endPage+1,\r\n\t\t\t)\r\n\t\t\tif(pagesDOM.length===1){\r\n\t\t\t\tselection=[{\r\n\t\t\t\t\tpage:        selection.startPage,\r\n\t\t\t\t\tstartLine:   selection.startLine,\r\n\t\t\t\t\tstartOffset: selection.startOffset,\r\n\t\t\t\t\tendLine:     selection.endLine,\r\n\t\t\t\t\tendOffset:   selection.endOffset,\r\n\t\t\t\t}]\r\n\t\t\t}else{\r\n\t\t\t\tconst startPage=pagesDOM.shift()\r\n\t\t\t\tconst startPageLines=startPage.children[1].children\r\n\t\t\t\tconst startPageLastLine=Array.from(startPageLines).pop()\r\n\t\t\t\t/*const lastPage=*/pagesDOM.pop()\r\n\t\t\t\tselection=[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpage:        selection.startPage,\r\n\t\t\t\t\t\tstartLine:   selection.startLine,\r\n\t\t\t\t\t\tstartOffset: selection.startOffset,\r\n\t\t\t\t\t\tendLine:     startPageLines.length-1,\r\n\t\t\t\t\t\tendOffset:   startPageLastLine.innerText.length,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...pagesDOM.map((page,i)=>{\r\n\t\t\t\t\t\tconst pageLines=page.children[1].children\r\n\t\t\t\t\t\tconst pageLastLine=Array.from(pageLines).pop()\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tpage: selection.startPage+i+1,\r\n\t\t\t\t\t\t\tstartLine:   0,\r\n\t\t\t\t\t\t\tstartOffset: 0,\r\n\t\t\t\t\t\t\tendLine:     pageLines.length-1,\r\n\t\t\t\t\t\t\tendOffset:   pageLastLine.innerText.length,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpage:        selection.endPage,\r\n\t\t\t\t\t\tstartLine:   0,\r\n\t\t\t\t\t\tstartOffset: 0,\r\n\t\t\t\t\t\tendLine:     selection.endLine,\r\n\t\t\t\t\t\tendOffset:   selection.endOffset,\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tsetSelection({\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\ttext: s.toString(),\r\n\t\t\t\tdata: selection,\r\n\t\t\t})\r\n\r\n\t\t\tconst focusNodeClientRect=focusNode.getBoundingClientRect()\r\n\t\t\tconst scrollNode=focusNode.closest('.ScrollbarsCustom-Scroller')\r\n\t\t\tsetBubblePos({\r\n\t\t\t\ttop: focusNodeClientRect.top+focusNodeClientRect.height+scrollNode.scrollTop,\r\n\t\t\t\t// left: focusNodeClientRect.left+focusNodeClientRect.width\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\t// console.log(e)\r\n\t\t\t// TODO: reset selection\r\n\t\t\tsetSelection()\r\n\t\t\tsetBubblePos({})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onEnter(i){\r\n\t\tconsole.log(i)\r\n\t}\r\n\r\n\t// function onLoadSuccess({numPages}){\r\n\t// \t// numPages=3\r\n\t// \t// const pages=new Array(numPages)\r\n\t// \t// for(let i=0,l={loaded: 0};i<numPages;++i){\r\n\t// \t// \t// pages[i]=\r\n\t// \t// \t// \t<Page\r\n\t// \t// \t// \t\tkey={i}\r\n\t// \t// \t// \t\tpageNumber={i+1}\r\n\t// \t// \t// \t\trenderAnnotationLayer={false}\r\n\t// \t// \t// \t\trenderTextLayer={true}\r\n\t// \t// \t// \t\twidth={900}\r\n\t// \t// \t// \t\tonGetTextSuccess={()=>{\r\n\t// \t// \t// \t\t\tref.current.children[i].appendChild(customHighlightLayer.cloneNode(true))\r\n\t// \t// \t// \t\t\tsetTextLoaded(++l.loaded===numPages)\r\n\t// \t// \t// \t\t}}\r\n\t// \t// \t// \t\t// {...{customTextRenderer}}\r\n\t// \t// \t// \t/>\r\n\t// \t// }\r\n\t//\r\n\t// \t// setPageState({numPages,pages})\r\n\t// }\r\n\r\n\t// function customTextRenderer(p){\r\n\t// \tconst pageIndex=p.page._pageIndex\r\n\t// \tconst l=marksFormatted[pageIndex]?.[lineIndex]\r\n\t// \tlet __html=tagStack.map(t=>`<mark-${t} class=\"mark\">`).join('')\r\n\t// \tif(l){\r\n\t// \t\tconst len=p.str.length\r\n\t// \t\tconst indices=[0,...l.map(l=>l.offset)]\r\n\t// \t\tconst substrings=[]\r\n\t// \t\tl.forEach((o,i)=>{\r\n\t// \t\t\tsubstrings.push(\r\n\t// \t\t\t\t_.escape(p.str.substring(indices[i],indices[i+1])),\r\n\t// \t\t\t\to.start?`<mark-${o.i} class=\"mark\">`:`</mark-${o.i}>`,\r\n\t// \t\t\t)\r\n\t// \t\t})\r\n\t// \t\tsubstrings.push(_.escape(p.str.substring(indices.pop(),len)))\r\n\t// \t\t__html+=substrings.join('')\r\n\t// \t}else\r\n\t// \t\t__html+=_.escape(p.str)\r\n\t//\r\n\t// \tl && l.forEach(o=>\r\n\t// \t\to.start?\r\n\t// \t\t\ttagStack.push(o.i):\r\n\t// \t\t\ttagStack.splice(tagStack.indexOf(o.i),1)\r\n\t// \t)\r\n\t//\r\n\t// \t++lineIndex\r\n\t// \treturn <span dangerouslySetInnerHTML={{__html}}/>\r\n\t// }\r\n\r\n\t// function didUpdate(){\r\n\t// \tif(!textLoaded) return\r\n\t//\r\n\t// \tconst fragments={}\r\n\t// \tconst createGetFragment=pageNumber=>fragments[pageNumber]??(fragments[pageNumber]=document.createDocumentFragment())\r\n\t//\r\n\t// \t// TODO: check state.COMMENTS[c]?.position_data\r\n\t// \t// const highlightStack=book.comment_set.map(c=>state.COMMENTS[c]?.position_data).flatMap(p=>{\r\n\t// \t// \ttry{ return [JSON.parse(p).forEach((p,i)=>p.forEach((p,j)=>{\r\n\t// \t// \t\tp.commentId\r\n\t// \t// \t})).flat(2)] }\r\n\t// \t// \tcatch{ return [] }\r\n\t// \t// })\r\n\t//\r\n\t// \tconst highlights=[]\r\n\t// \tbook.comment_set.map(cid=>state.COMMENTS[cid]).forEach(c=>{\r\n\t// \t\tlet posData\r\n\t// \t\ttry{posData=JSON.parse(c.position_data)}catch{return}\r\n\t// \t\tisArray(posData) && posData.forEach((selectionData,i)=>isArray(selectionData) && selectionData.forEach(\r\n\t// \t\t\t(highlightData,j)=>{\r\n\t// \t\t\t\thighlights.push({\r\n\t// \t\t\t\t\tcommentId: c.id,\r\n\t// \t\t\t\t\tselectionIndex: i,\r\n\t// \t\t\t\t\thighlightFragment: j,\r\n\t// \t\t\t\t\t...highlightData,\r\n\t// \t\t\t\t})\r\n\t// \t\t\t}\r\n\t// \t\t))\r\n\t// \t})\r\n\t// \thighlights.forEach(h=>{\r\n\t// \t\tconst hs=JSON.stringify(h)\r\n\t// \t\tif(!rendered[hs]){\r\n\t// \t\t\trendered[hs]=true\r\n\t// \t\t\tconst span=document.createElement('span')\r\n\t// \t\t\tspan.id='a'+h.commentId+h.selectionIndex\r\n\t// \t\t\tspan.classList=\r\n\t// \t\t\t\t' a'+h.commentId+\r\n\t// \t\t\t\t' a'+h.commentId+h.selectionIndex+\r\n\t// \t\t\t\t' a'+h.commentId+h.selectionIndex+h.highlightFragment\r\n\t// \t\t\tspan.onclick=()=>document.querySelector(`#b${h.commentId}`)?.scrollIntoView({behavior: 'smooth'}) // eslint-disable-line no-unused-expressions\r\n\t// \t\t\tgetHighlightTags(h,span)\r\n\t// \t\t\tcreateGetFragment(h.page).appendChild(span)\r\n\t// \t\t}\r\n\t// \t})\r\n\t// \t_.forIn(fragments,(fragment,pageNumber)=>ref.current.children[pageNumber].children[2].appendChild(fragment))\r\n\t// }\r\n\r\n\t// function getHighlightTags(h,fragment){\r\n\t// \tconst page=ref.current.children[h.page]\r\n\t// \tconst textLayer=page.children[1]\r\n\t// \tconst lines=Array.from(textLayer.children).slice(h.startLine,h.endLine+1)\r\n\t// \tif(lines.length===1){\r\n\t// \t\tconst line=lines[0].cloneNode(true)\r\n\t// \t\tline.innerHTML=\r\n\t// \t\t\t_.escape(line.innerText.substring(0,h.startOffset))+`<span class=\"mark\">`+\r\n\t// \t\t\t_.escape(line.innerText.substring(h.startOffset,h.endOffset))+`</span>`+\r\n\t// \t\t\t_.escape(line.innerText.substring(h.endOffset,line.innerText.length))\r\n\t// \t\tfragment.appendChild(line)\r\n\t// \t}else{\r\n\t// \t\ttry{\r\n\t// \t\t\tconst firsLine=lines.shift().cloneNode(true)\r\n\t// \t\t\tconst lastLine=lines.pop().cloneNode(true)\r\n\t//\r\n\t// \t\t\tfirsLine.innerHTML=\r\n\t// \t\t\t\t_.escape(firsLine.innerText.substring(0,h.startOffset))+`<span class=\"mark\">`+\r\n\t// \t\t\t\t_.escape(firsLine.innerText.substring(h.startOffset,firsLine.innerText.length))\r\n\t// \t\t\tfragment.appendChild(firsLine)\r\n\t//\r\n\t// \t\t\tlines.forEach(line=>{\r\n\t// \t\t\t\tconst m=line.cloneNode(true)\r\n\t// \t\t\t\tm.classList='mark'\r\n\t// \t\t\t\tfragment.appendChild(m)\r\n\t// \t\t\t})\r\n\t//\r\n\t// \t\t\tlastLine.innerHTML=\r\n\t// \t\t\t\t`<span class=\"mark\">`+\r\n\t// \t\t\t\t_.escape(lastLine.innerText.substring(0,h.endOffset))+`</span>`+\r\n\t// \t\t\t\t_.escape(lastLine.innerText.substring(h.endOffset,lastLine.innerText.length))\r\n\t// \t\t\tfragment.appendChild(lastLine)\r\n\t// \t\t}catch{}\r\n\t// \t}\r\n\t// }\r\n})\r\n","import React,{useContext,useEffect,useState} from 'react'\r\nimport {withRouter,Route} from 'react-router-dom'\r\nimport {Scrollbar} from 'react-scrollbars-custom'\r\n\r\nimport './PdfView.scss'\r\nimport Header from '../Header/Header'\r\nimport SegmentControls from '../../utils/SegmentControls/SegmentControls'\r\nimport tabStart from '../../assets/imgs/tab-start.svg'\r\nimport Comment from '../Comment/Comment'\r\nimport CommentThread from '../CommentThread/CommentThread'\r\nimport PdfContainer from '../PdfContainer/PdfContainer'\r\nimport {MainContext} from '../../contexts/MainContext'\r\nimport axios from 'axios'\r\n\r\nexport default withRouter(function PdfView({history,match,location}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tconst [sidebarMode,setSidebarMode]=useState(1)\r\n\tconst [userFilter,setUserFilter]=useState(false)\r\n\tconst [searchString,setSearchString]=useState('')\r\n\tuseEffect(refresh,[location.pathname])\r\n\r\n\tconst book=state.BOOKS[match.params.id]\r\n\tconst {userId}=state\r\n\tconst sidebarModeText=sidebarMode===0?'question':'comment'\r\n\r\n\tconst categorized={\r\n\t\tquestion: [],\r\n\t\tcomment: [],\r\n\t}\r\n\tbook?.comment_set.forEach(c=>{ // eslint-disable-line no-unused-expressions\r\n\t\tc=state.COMMENTS[c]\r\n\t\tif(!c) return\r\n\t\tif(!categorized[c.typeof]) categorized[c.typeof]=[]\r\n\t\tif(!c.hidden) categorized[c.typeof].push(c)\r\n\t})\r\n\tconst filtered=categorized[sidebarModeText].filter(comment=>(\r\n\t\t(!userFilter || userFilter && ''+comment.user===''+userId) && // eslint-disable-line\r\n\t\t(comment.hashtag.indexOf(searchString)!==-1)\r\n\t))\r\n\r\n\treturn (\r\n\t\t<div className=\"PdfView pos-abs stretch-to-fit f-vert\">\r\n\t\t\t<section className=\"row main-section\">\r\n\t\t\t\t<div className=\"col left-sidebar pos-rel\">\r\n\t\t\t\t\t<PdfContainer\r\n\t\t\t\t\t\t// className={pdfMode===1?'highlight-mode':''}\r\n\t\t\t\t\t\t{...{/*pdfMode,setPdfMode,*/sidebarMode,setSidebarMode,sidebarModeText,book}}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"right-sidebar row pos-rel p-12 pl-0\">\r\n\t\t\t\t\t<div className=\"vertical-tabs f-vert\">\r\n\t\t\t\t\t\t<div className=\"col\" style={{maxHeight: '14px'}}/>\r\n\t\t\t\t\t\t<div className={sidebarMode===0?'active':''} onClick={()=>setSidebarMode(0)}>\r\n\t\t\t\t\t\t\t<img src={tabStart} alt=\"\"/>\r\n\t\t\t\t\t\t\t<div className=\"vertical-text px-4\">Questions <span className=\"h7\">\r\n\t\t\t\t\t\t\t\t{categorized['question'].length}\r\n\t\t\t\t\t\t\t</span></div>\r\n\t\t\t\t\t\t\t<img src={tabStart} alt=\"\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={sidebarMode===1?'active':''} onClick={()=>setSidebarMode(1)}>\r\n\t\t\t\t\t\t\t<img src={tabStart} alt=\"\"/>\r\n\t\t\t\t\t\t\t<div className=\"vertical-text px-4\">Comments <span className=\"h7\">\r\n\t\t\t\t\t\t\t\t{categorized['comment'].length}\r\n\t\t\t\t\t\t\t</span></div>\r\n\t\t\t\t\t\t\t<img src={tabStart} alt=\"\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span className=\"col\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col trim\">\r\n\t\t\t\t\t\t<Scrollbar disableTracksWidthCompensation>\r\n\t\t\t\t\t\t\t<div className=\"row spc-12 f-vert\">\r\n\t\t\t\t\t\t\t\t{filtered.map(c=><Comment key={c.id} {...{commentId: c.id}}/>)}\r\n\t\t\t\t\t\t\t\t{/*<div style={{height: '2000px'}}/>*/}\r\n\t\t\t\t\t\t\t\t<div className=\"col-ext-x col-ext-t pos-sty top-controls f-order-m1 f-vert\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"row spc-12 f-vert\">\r\n\t\t\t\t\t\t\t\t\t\t<SegmentControls value={+userFilter}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"super-center capitalize\" onClick={()=>setUserFilter(false)}>All {sidebarModeText}s</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"super-center capitalize\" onClick={()=>setUserFilter(true)}>My {sidebarModeText}s</div>\r\n\t\t\t\t\t\t\t\t\t\t</SegmentControls>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" placeholder=\" &#xf002;  filter by hashtag\" onChange={e=>setSearchString(e.target.value)}/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"mx-auto pill mt-8 mb-m6 px-10 py-2 h7\">{filtered.length} results</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Scrollbar>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<Header>\r\n\t\t\t\t<div className=\"icon icon-arrow_left f-order-m1 super-center\" onClick={history.goBack}/>\r\n\t\t\t\t{/*<div className=\"heading\">*/}\r\n\t\t\t\t<div className=\"col text-right mr-12\">\r\n\t\t\t\t\t<h5 className=\"col-12 b-700\">{book?book.title:'Book Title'}</h5>\r\n\t\t\t\t\t<div className=\"h7 text-muted\">Group: Group Name</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"icon icon-refresh super-center\" onClick={refresh}/>\r\n\t\t\t\t{/*</div>*/}\r\n\t\t\t</Header>\r\n\t\t\t<Route path=\"*/thread/:id\" component={CommentThread}/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tfunction refresh(){\r\n\t\taxios.get(state.url+'readingbook/'+match.params.id).then(({data})=>{\r\n\t\t\tdispatch(['SET_DATA',data])\r\n\t\t})\r\n\t}\r\n})\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\n\r\nimport './Login.scss'\r\nimport SegmentControls from '../../utils/SegmentControls/SegmentControls'\r\nimport MyComponent from '../MyComponent'\r\nimport {MainContext} from '../../contexts/MainContext'\r\nimport Spinner from '../../utils/Spinner/Spinner'\r\n\r\n// TODO: Switch to await (for 1 level catch)\r\nconst initState=JSON.stringify({\r\n\tmode: 0,\r\n\terrorSignUp: '',\r\n\terrorLogIn: '',\r\n\tshowSpinner: false,\r\n})\r\nexport default class Login extends MyComponent{\r\n\tstatic contextType=MainContext\r\n\tstate=JSON.parse(initState)\r\n\r\n\tlogin=async e=>{\r\n\t\te.preventDefault()\r\n\t\tthis.setState({showSpinner: true})\r\n\r\n\t\tconst {history,location}=this.props\r\n\t\tconst {url}=this.context.state\r\n\t\ttry{\r\n\t\t\tconst loginResponse=await axios.post(url+'login',_.pick(this.state,['email','password']))\r\n\t\t\tthis.context.dispatch(['LOGIN',loginResponse.data])\r\n\t\t\thistory.replace(location.pathname.replaceAll('/login',''))\r\n\t\t}catch(e){\r\n\t\t\tconsole.log(e)\r\n\t\t\te.response?\r\n\t\t\t\tthis.setState({errorLogIn: Object.keys(e.response.data).map(key=><div {...{key}}>&#xf071; {_.capitalize(key)}: {e.response.data[key]}</div>)}):\r\n\t\t\t\tthis.setState({errorLogIn: <div>&#xf071; Error: Network Error</div>})\r\n\t\t}finally{\r\n\t\t\tthis.setState({showSpinner: false})\r\n\t\t}\r\n\t}\r\n\r\n\tsignUp=e=>{\r\n\t\te.preventDefault()\r\n\t\tthis.setState({showSpinner: true})\r\n\r\n\t\tconst {password,password_2}=this.state\r\n\t\tconst {url}=this.context.state\r\n\t\tif(password!==password_2){\r\n\t\t\tthis.setState({errorSignUp: <>&#xf071;The passwords dont match!</>})\r\n\t\t\treturn\r\n\t\t}\r\n\t\taxios.post(url+'register',_.pick(this.state,['username','password','email']))\r\n\t\t\t.then(({data})=>{\r\n\t\t\t\tconsole.log(data,this.state,JSON.parse(initState))\r\n\t\t\t\tthis.setState(JSON.parse(initState))\r\n\t\t\t\t// TODO: remove\r\n\t\t\t\tconst groupId='69f464bf-7f5b-4b66-a0a1-3ed388204aa0'\r\n\t\t\t\taxios.get(`http://test-for-bbbook.herokuapp.com/bbapi/group/${groupId}/adduser/${data.user.id}`)\r\n\t\t\t})\r\n\t\t\t.catch(e=>{\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\te.response?\r\n\t\t\t\t\tthis.setState({errorSignUp: Object.keys(e.response.data).map(key=><div {...{key}}>&#xf071; {_.capitalize(key)}: {e.response.data[key]}</div>)}):\r\n\t\t\t\t\tthis.setState({errorLogIn: <div>&#xf071; Error: Network Error</div>})\r\n\t\t\t})\r\n\t\t\t.finally(()=>this.setState({showSpinner: false}))\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst {login,signUp}=this\r\n\t\tconst {mode,errorSignUp,errorLogIn,showSpinner}=this.state\r\n\t\tconst {version}=this.context.state\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"Login\" className=\"pos-abs stretch-to-fit\">\r\n\t\t\t\t<div className=\"container row p-32\">\r\n\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t<h1 className=\"heading py-32\">\r\n\t\t\t\t\t\t\tBBBook<sup className=\"h7 normal-caps ml-8\" style={{height: 'auto'}}>Pre-Alpha {version}</sup>\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"card row spc-16 f-vert pos-rel\" style={{width: '360px'}}>\r\n\t\t\t\t\t\t<SegmentControls value={mode}>\r\n\t\t\t\t\t\t\t<div className=\"super-center\" onClick={()=>this.setState({mode: 0})}>Log In</div>\r\n\t\t\t\t\t\t\t<div className=\"super-center\" onClick={()=>this.setState({mode: 1})}>Sign up</div>\r\n\t\t\t\t\t\t</SegmentControls>\r\n\t\t\t\t\t\t{mode===0?\r\n\t\t\t\t\t\t\t<form className=\"row spc-16 f-vert col col-ext pos-rel trim\" onSubmit={login}>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h1>Log In</h1>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 text-muted\">Enter the BBBook portal.</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Email</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('email')} name=\"email\" type=\"email\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Password</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('password')} name=\"password\" type=\"password\"/>\r\n\t\t\t\t\t\t\t\t{/*<Link className=\"button super-center\" to=\"/dashboard\">Log In</Link>*/}\r\n\t\t\t\t\t\t\t\t<div className=\"h7 my-0 text-right text-red\">{errorLogIn}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"bottom-row col-ext-x col-ext-b text-right row f-vert spc-x-16 spc-y-12\">\r\n\t\t\t\t\t\t\t\t\t<button>Log In</button>\r\n\t\t\t\t\t\t\t\t\t<hr className=\"col-ext-x\"/>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 text-right my-2\" onClick={()=>this.setState({mode: 1})}>New to BBBook? Sign up!</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t:<form className=\"row spc-16 f-vert col col-ext pos-rel trim\" onSubmit={signUp}>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h1>Sign Up</h1>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 text-muted\">Enter the BBBook portal.</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Email</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('email')} name=\"email\" type=\"email\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Password</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('password')} name=\"password\" type=\"password\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Confirm Password</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('password_2')} name=\"password_2\" type=\"password\"/>\r\n\t\t\t\t\t\t\t\t<label required className=\"h7 my-0\">Username</label>\r\n\t\t\t\t\t\t\t\t<input required {...this.twoWayBind('username')} name=\"username\" type=\"text\"/>\r\n\t\t\t\t\t\t\t\t{/*<Link className=\"button super-center\" to=\"/dashboard\">Sign Up</Link>*/}\r\n\t\t\t\t\t\t\t\t<div className=\"h7 my-0 text-right text-red\">{errorSignUp}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"bottom-row col-ext-x col-ext-b text-right row f-vert spc-x-16 spc-y-12\">\r\n\t\t\t\t\t\t\t\t\t<button>Sign Up</button>\r\n\t\t\t\t\t\t\t\t\t<hr className=\"col-ext-x\"/>\r\n\t\t\t\t\t\t\t\t\t<div className=\"h7 text-right my-2\" onClick={()=>this.setState({mode: 0})}>Have an account? Login in!</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Spinner {...{className: showSpinner?'active':''}}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import React,{useContext,useEffect} from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nimport './Groups.scss'\r\nimport Header from '../Header/Header'\r\nimport {MainContext} from '../../contexts/MainContext'\r\n\r\nexport default withRouter(function Groups({location}){\r\n\tconst {state,dispatch}=useContext(MainContext)\r\n\tuseEffect(refresh,[location.pathname])\r\n\tconst user=state.USERS[state.userId]\r\n\r\n\tfunction refresh(){\r\n\t\tif(!state.userId) return\r\n\t\taxios.get(state.url+'dashboard/'+state.userId).then(({data})=>{\r\n\t\t\tdispatch(['SET_DATA',data])\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div id=\"Groups\" className=\"pos-abs stretch-to-fit\">\r\n\t\t\t<Header>\r\n\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t<div className=\"icon icon-refresh super-center\" onClick={refresh}/>\r\n\t\t\t</Header>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t{(user?.joined_groups || []).map(groupId=>{\r\n\t\t\t\t\tconst g=state.GROUPS[groupId]\r\n\t\t\t\t\treturn g?(\r\n\t\t\t\t\t\t<div key={groupId} className=\"group row spc-16\">\r\n\t\t\t\t\t\t\t<div className=\"title col-12 pb-12 pos-rel\">\r\n\t\t\t\t\t\t\t\t<img className=\"mr-12\" src={require('../../assets/imgs/letter.png')} alt=\"Group icon\"/>\r\n\t\t\t\t\t\t\t\t<h3>{g.title}</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"h7 text-muted one-line\">{g.bio}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{g.books.map(bookId=>{\r\n\t\t\t\t\t\t\t\tconst b=state.BOOKS[bookId]\r\n\t\t\t\t\t\t\t\treturn b?(\r\n\t\t\t\t\t\t\t\t\t<Link to={'/pdf/'+bookId} className=\"col-3 col-2-xl book\" key={bookId}>\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"col-12 card\" src={b.thumbnail || require('../../assets/imgs/letter.png')} alt=\"Book placeholder\"/>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"pt-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"one-line\">{b.title}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"h7 text-muted one-line\">{b.detail}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t):undefined\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t):undefined\r\n\t\t\t\t})}\r\n\t\t\t\t<Link className=\"button f-center f-horz-rev pos-abs create-group-btn p-0\" to={location.pathname+'/edit-group/0'}>\r\n\t\t\t\t\t<i className=\"fa fa-plus super-center h5\"/>\r\n\t\t\t\t\t<div className=\"super-center pl-24 pr-12 one-line\">Create Group</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})","import React from 'react'\r\n\r\nimport './EditGroup.scss'\r\nimport MyComponent from '../MyComponent'\r\nimport SegmentControls from '../../utils/SegmentControls/SegmentControls'\r\n\r\nexport default class EditGroup extends MyComponent{\r\n\tstate={\r\n\r\n\t}\r\n\trender(){\r\n\t\tconst {history}=this.props\r\n\t\treturn (\r\n\t\t\t<div id=\"EditGroup\" className=\"modal active\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<div className=\"close-btn\" onClick={history.goBack}/>\r\n\t\t\t\t\t<div className=\"row spc-12\">\r\n\t\t\t\t\t\t<h3 className=\"col-12\">New Group</h3>\r\n\t\t\t\t\t\t<hr className=\"col-12 col-ext-x\"/>\r\n\t\t\t\t\t\t<button className=\"outline\" style={{width: '80px',height: '80px'}}/>\r\n\t\t\t\t\t\t<div className=\"col row spc-12 col-ext\">\r\n\t\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t\t<label className=\"h7 mb-4\">Group Name</label>\r\n\t\t\t\t\t\t\t\t<input className=\"col-12\" type=\"text\"/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<label className=\"h7 mb-4\">Group Description</label>\r\n\t\t\t\t\t\t\t\t<textarea className=\"col-12\"/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-6\">\r\n\t\t\t\t\t\t\t\t<label className=\"h7 mb-4\">Group Privacy</label>\r\n\t\t\t\t\t\t\t\t<SegmentControls value={0}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"super-center\">Public</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"super-center\">Private</div>\r\n\t\t\t\t\t\t\t\t</SegmentControls>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-6\">\r\n\t\t\t\t\t\t\t\t<label className=\"h7 mb-4\">Group Link Sharing</label>\r\n\t\t\t\t\t\t\t\t<SegmentControls value={0}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"super-center\">Enabled</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"super-center\">Disabled</div>\r\n\t\t\t\t\t\t\t\t</SegmentControls>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"bottom-row col-12 col-ext row spc-12\">\r\n\t\t\t\t\t\t<div className=\"col\"/>\r\n\t\t\t\t\t\t<button className=\"outline\">Cancel</button>\r\n\t\t\t\t\t\t<button>Create Group</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React,{useContext} from 'react'\nimport {Route,withRouter,Switch} from 'react-router-dom'\n\nimport './App.scss'\nimport {MainContext} from '../../contexts/MainContext'\nimport Sidemenu from '../Sidemenu/Sidemenu'\nimport Dashboard from '../Dashboard/Dashboard'\nimport PdfView from '../PdfView/PdfView'\nimport Login from '../Login/Login'\nimport Alert from '../../utils/Alert/Alert'\nimport Groups from '../Groups/Groups'\nimport EditGroup from '../EditGroup/EditGroup'\n\nexport default withRouter(function App({location,history}){\n\tconst {dispatch}=useContext(MainContext)\n\n\tif(location.pathname==='/')\n\t\thistory.replace('/dashboard')\n\n\treturn (\n\t\t<div id=\"App\">\n\t\t\t<Sidemenu/>\n\t\t\t<div id=\"main-content\" className=\"pos-abs stretch-to-fit\">\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/dashboard\" component={Dashboard}/>\n\t\t\t\t\t<Route path=\"/groups\" component={Groups}/>\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t\t<Route path=\"*/pdf/:id\" component={PdfView}/>\n\t\t\t<Route path=\"*/edit-group/:id\" component={EditGroup}/>\n\t\t\t<Route path=\"*/login\" component={Login}/>\n\t\t\t<div\n\t\t\t\tid=\"shield\"\n\t\t\t\tclassName=\"hide pos-abs stretch-to-fit\"\n\t\t\t\tonClick={()=>dispatch(['SET_UI_SIDEMENU',false])}\n\t\t\t/> {/* Activated when Sidemenu active to prevent clicks over main-content */}\n\t\t\t<Alert/>\n\t\t</div>\n\t)\n})\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {HashRouter} from 'react-router-dom'\n\nimport './index.scss'\nimport App from './components/App/App'\nimport * as serviceWorker from './serviceWorker'\nimport MainContextProvider from './contexts/MainContext'\n\nReactDOM.render(\n\t<HashRouter>\n\t\t<MainContextProvider>\n\t\t\t{/*<React.StrictMode>*/}\n\t\t\t\t<App/>\n\t\t\t{/*</React.StrictMode>*/}\n\t\t</MainContextProvider>\n\t</HashRouter>,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n","module.exports = __webpack_public_path__ + \"static/media/tab-start.a5a8aa61.svg\";","module.exports = __webpack_public_path__ + \"static/media/letter.74d7f973.png\";","module.exports = \"data:image/jpeg;base64,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\""],"sourceRoot":""}