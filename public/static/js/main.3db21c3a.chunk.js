(this.webpackJsonp1=this.webpackJsonp1||[]).push([[0],[,function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"g",(function(){return h})),a.d(t,"h",(function(){return E})),a.d(t,"d",(function(){return f})),a.d(t,"i",(function(){return N})),a.d(t,"e",(function(){return g})),a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return j})),a.d(t,"f",(function(){return D}));var n=a(3),r=a.n(n),c=a(7),A=a(9),s=a(0),o=a.n(s),l=a(10),i=a(51),m=a.n(i),u=a(30),d=a(14),p=a(46),v=a(159);window.axios=m.a;var f,g,b=Object(s.createContext)(JSON.parse(u.b)),h=/[^A-Za-z0-9 ]+/g,E="^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$",N=!0;function w(e){void 0===(N=e)&&Object(p.b)()}function O(e){var t,a=e.children;g=Object(l.f)();var n=Object(s.useReducer)(u.a,JSON.parse(u.b)),r=Object(A.a)(n,2);return t=r[0],f=r[1],Object(s.useEffect)((function(){-1===g.location.pathname.indexOf("/login")?function(){k.apply(this,arguments)}():w(void 0)}),[]),o.a.createElement(b.Provider,{value:t},a)}function j(e,t,a){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(r.a.mark((function e(t,a,n){var c,A;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={url:u.c.url+a,method:t,data:n,headers:{Authorization:"Bearer "+N},withCredentials:!0},e.prev=1,e.next=4,m()(c);case 4:return(A=e.sent).data.token&&w(A.data.token),e.abrupt("return",A.data);case 9:e.prev=9,e.t0=e.catch(1),S(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function S(e){var t,a;throw console.log(e,e.response),Object(d.b)(o.a.createElement("div",{className:"row spc-12",style:{width:320}},o.a.createElement("div",{className:"col-12 h5"},"\uf071 Error"),o.a.createElement("div",{className:"col-12 h7 text-muted"},(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?o.a.createElement("div",null,e.response.data.message):o.a.createElement("div",null,"Network error. If you can, try that again please.")),o.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},o.a.createElement("button",{onClick:function(){return Object(d.b)()}},"Close")))),e}function y(){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(r.a.mark((function e(){var t,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0;case 1:return t=!1,e.prev=2,e.next=5,j.apply(void 0,a);case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.response&&e.t0.response.status===v.a.UNAUTHORIZED){e.next=15;break}return e.next=13,B(e.t0);case 13:if(!e.sent){e.next=15;break}t=!0;case 15:if(t){e.next=1;break}case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function B(e){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var a,n;return Object(d.b)(o.a.createElement("div",{className:"row spc-12",style:{width:320}},o.a.createElement("div",{className:"col-12 h5"},"\uf071 Error"),o.a.createElement("div",{className:"col-12 h7 text-muted"},(null===(a=t.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)?o.a.createElement("div",null,t.response.data.message):o.a.createElement("div",null,"Network error. If you can, try that again please.")),o.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},o.a.createElement("button",{className:"outline",onClick:function(){Object(d.b)(),e(!1)}},"Cancel"),o.a.createElement("button",{onClick:function(){Object(d.b)(),e(!0)}},"Retry"))))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("post","refresh");case 2:(t=e.sent)?f(["LOGIN",t.data]):w(void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return G.apply(this,arguments)}function G(){return(G=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("post","logout");case 2:w(void 0),f(["SET_STATE",JSON.parse(u.b)]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i}));a(5);var n=a(0),r=a.n(n),c=a(10),A=a(15),s=a(8),o=a.n(s),l=function(e){return function(t){var a;return r.a.createElement(e,Object.assign({},t,{params:Object(A.d)((null===(a=t.animatedProps)||void 0===a?void 0:a._match.params)||Object(c.h)())}))}},i=function(e,t,a){return function(c){return r.a.createElement(a,Object.assign({},c,o.a.pick(Object(n.useContext)(e),t)))}}},,,,,,,function(e,t,a){e.exports=a.p+"static/media/tab-start.7684764d.svg"},function(e,t,a){"use strict";a.d(t,"b",(function(){return n}));var n,r=a(9),c=a(0),A=a.n(c),s=a(10);t.a=Object(s.i)((function(){var e,t=Object(c.useState)(),a=Object(r.a)(t,2);return e=a[0],n=a[1],A.a.createElement("div",{id:"Alert",className:"modal"+(e?" active":" ")},e?A.a.createElement("div",{style:{minWidth:320,maxWidth:"calc(100% - 24px)",maxHeight:"calc(100% - 24px)"}},A.a.createElement("div",{className:"close-btn",onClick:function(){return n()}}),e):void 0)}))},function(e,t,a){"use strict";a.d(t,"c",(function(){return A})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return i}));var n=a(5),r=a(47),c=a(0),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.useState)(e)[0]};function s(){var e=Object(c.useState)()[1];return function(){return e({})}}function o(e,t){var a=A([]),n=Object(r.a)(a),c=[],s=!1;for(var o in e)(c[o]=a[o]!==e[o])&&(s=!0)&&(a[o]=e[o]);s&&t(e,n,c)}function l(e){var t=e.componentWillMount,a=e.componentDidMount,n=e.componentWillUnmount,r=typeof n;if(n&&"function"!==r)throw new Error("useLifecycle: componentWillUnmount must be a function. (Got: `"+r+"`)");Object(c.useState)(t),Object(c.useEffect)((function(){return a&&a(),n}),[])}function i(e){var t=A(),a=A(),r=!1;for(var c in e)a[c]=e[c],t[c]!==e[c]&&(r=!0)&&(t[c]=e[c]);return r?Object(n.a)({},a):a}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n);a(114);function c(e){var t,c=e.className,A=e.ref;return t=Object(n.useRef)(),r.a.createElement("div",Object.assign({className:"spinner pos-abs stretch-to-fit super-center "+c},{ref:t}),r.a.createElement("img",{className:"p-8",src:a(115),alt:"Spinner"}))}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return I})),a.d(t,"b",(function(){return H})),a.d(t,"d",(function(){return U})),a.d(t,"c",(function(){return R}));var n,r,c=a(21),A=a(26),s=a(23),o=a(22),l=a(3),i=a.n(l),m=a(7),u=a(9),d=a(0),p=a.n(d),v=a(10),f=a(4),g=a(11),b=a(8),h=a.n(b),E=(a(116),a(35)),N=a(24),w=a(13),O=a.n(w),j=a(33),x=(a(118),a(27)),S=a(1),y=JSON.stringify({body:"",hashtags:""}),M=Object(v.i)((r=n=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),A=0;A<a;A++)r[A]=arguments[A];return(e=t.call.apply(t,[this].concat(r))).state=JSON.parse(y),e.onSubmit=function(t){t.preventDefault();var a=e.props.match.params.id,n=e.state,r=n.body,c=n.hashtags,A=e.context,s=A.COMMENTS,o=A.userId,l=s[a];Object(S.b)("post","comment",{body:r,hashtags:c.replace(S.g,"").trim(),user_id:o,book_id:l.book_id,reply_to_id:a,comment_type:"reply"}).then(Object(m.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.b)("get","book-full/"+l.book_id);case 2:a=t.sent,(n=a.data)&&Object(S.d)(["SET_DATA",n]),e.setState(JSON.parse(y));case 6:case"end":return t.stop()}}),t)}))))},e}return Object(A.a)(n,[{key:"render",value:function(){var e,t=this.onSubmit,n=this.props,r=n.history,c=n.match.params.id,A=this.context,s=A.userId,o=A.USERS;return p.a.createElement("div",{className:"CommentThread pos-abs stretch-to-fit row spc-12 f-justify-end"},p.a.createElement("div",{className:"p-12 f-start f-justify-end f-self-start"},p.a.createElement("div",{className:"h5 icon icon-cross_mark",onClick:r.goBack,style:{cursor:"pointer"}})),p.a.createElement(g.a,{disableTracksWidthCompensation:!0,className:"thread-container col",style:{height:"auto"}},p.a.createElement("div",{className:"row spc-12 f-vert pos-rel"},p.a.createElement(j.a,{commentId:c,showChildren:!0},p.a.createElement("div",{className:"reply-input"},p.a.createElement("div",{className:"top-row row pb-4 f-justify-end"},p.a.createElement("div",{className:"col"}),p.a.createElement("div",{className:"h7 text-muted"},"@",(null===(e=o[s])||void 0===e?void 0:e.username)||"Username"),p.a.createElement("img",{className:"pos-rel",src:a(40),alt:"User icon"})),p.a.createElement("form",Object.assign({className:"form row spc-12"},{onSubmit:t}),p.a.createElement("div",{className:"h7 col-12 my-2"},"Add reply"),p.a.createElement("textarea",Object.assign({required:!0,className:"col-12",cols:"30",rows:"10",placeholder:"Reply"},this.twoWayBind("body"))),p.a.createElement("input",Object.assign({type:"text",className:"col",placeholder:"#Hashtag"},this.twoWayBind("hashtags"))),p.a.createElement("button",null,"Post")))))))}}]),n}(x.a),n.contextType=S.a,r)),B=a(16),C=a(32),k=a(15),D=a(6),G=a(34),P={1:"Entering",2:"Entered","-1":"Exiting","-2":"Exited",Entering:1,Entered:2,Exiting:-1,Exited:-2},W=function(e){e.children,e.component;var t,a,n=e.render,r=e.timeout,c=void 0===r?0:r,A=Object(G.a)(e,["children","component","render","timeout"]),s=Object(k.a)(),o=Object(k.c)({stateEnum:P,state:"Exited",stateNumeric:-2,_match:void 0,timeStamp:0,componentDidEnter:void 0,componentWillExit:void 0});return"number"===typeof c&&(c={enter:c,exit:c}),null!==(t=c.enter)&&void 0!==t||(c.enter=0),null!==(a=c.exit)&&void 0!==a||(c.exit=0),o.timeout=c,p.a.createElement(v.a,Object.assign({},A,{children:function(e){var t=e.match;null!==t&&o.stateNumeric<0&&(o._match=t)&&(c.enter>0?(l(1),o.timeStamp=Date.now(),window.setTimeout(i,c.enter)):l(2)),null===t&&o.stateNumeric>0&&(c.exit>0?(l(-1),o.timeStamp=Date.now(),window.setTimeout(m,c.exit)):l(-2));var a=n;return-2!==o.stateNumeric?p.a.createElement(a,{animatedProps:o}):null}}));function l(e){switch(o.stateNumeric=e,o.state=P[e],e){case 2:o.componentDidEnter&&o.componentDidEnter();break;case-1:o.componentWillExit&&o.componentWillExit();break;case-2:s(),o.componentDidEnter=void 0,o.componentWillExit=void 0}}function i(){1===o.stateNumeric&&Date.now()>=o.timeStamp+c.enter&&l(2)}function m(){-1===o.stateNumeric&&Date.now()>=o.timeStamp+c.exit&&l(-2)}},I=Object(d.createContext)({}),Y=a(148).default,L={question:a(71).default,comment:a(71).default,note:a(150).default,highlight:a(151).default},T={question:"public",comment:"public",note:"private",highlight:"private"},z=JSON.stringify({question:[],comment:[],note:[],highlight:[]}),H=(t.e=Object(D.b)(Object(D.a)(S.a,["userId","BOOKS","GROUPS","COMMENTS","SELECTIONS"],Object(d.memo)((function(e){var t,a,n=e.params,r=e.userId,c=e.BOOKS,A=e.GROUPS,s=e.COMMENTS,o=e.SELECTIONS;console.log("render");var l=Object(d.useRef)(),f=Object(d.useRef)(),g=c[n.bookId],b=A[null===g||void 0===g?void 0:g.group_id],h=Object(k.c)({topMostVisiblePage:void 0,bottomMostVisiblePage:void 0,visiblePagesStyles:void 0,pageWiseCommentsBefore:void 0,pageWiseCommentsAfter:void 0,pdf:void 0,setBubblePos:void 0,categorized:JSON.parse(z),pageWiseComments:{}});Object(k.b)({componentWillUnmount:function(){var e,t;null===(e=h.pdf)||void 0===e||null===(t=e.pdf)||void 0===t||t.destroy()}});var w=Object(d.useState)("comment"),O=Object(u.a)(w,2),j=O[0],x=O[1],y=Object(d.useState)(),D=Object(u.a)(y,2),G=D[0],P=D[1],H=Object(d.useState)(),U=Object(u.a)(H,2),R=U[0],Z=U[1],q=T[j];Object(d.useEffect)((function(){F()}),[n.bookId+r]),Object(d.useEffect)((function(){!function(){V.apply(this,arguments)}()}),[null===g||void 0===g?void 0:g.id]),Object(k.e)([null===g||void 0===g?void 0:g.comment_ids],(function(e){var t=Object(u.a)(e,1)[0];h.categorized=JSON.parse(z);var a=[];null===t||void 0===t||t.forEach((function(e){(e=s[e])&&(h.categorized[e.comment_type]||(h.categorized[e.comment_type]=[]),e.hidden||(h.categorized[e.comment_type].push(e),a.push(e)))})),h.pageWiseComments={},a.forEach((function(e){(o[e.id]||[]).forEach((function(t){return null===t||void 0===t?void 0:t.data.forEach((function(t){var a=+t.page;h.pageWiseComments[a]||(h.pageWiseComments[a]=[]),h.pageWiseComments[a].push(e)}))}))}))}));var J=L[j];return p.a.createElement(I.Provider,{value:{book:g,categorized:h.categorized,group:b,BookContextLocal:h,pageWiseComments:h.pageWiseComments,pdf:R,publicPrivateMode:q,ref:l,selection:G,setBubblePos:h.setBubblePos,setSelection:P,setSidebarMode:x,setVisiblePages:function(e,t){h.topMostVisiblePage=e,h.bottomMostVisiblePage=t;for(var a=[],n=e;n<=t;++n)a.push("\n\t\t\t\t#page-".concat(n,"-comments.PageWiseComments{ height: var(--height) !important }\n\t\t\t"));h.visiblePagesStyles=a.join(""),function(){l&&(l.current.style.setProperty("--topMostVisiblePage",h.topMostVisiblePage),l.current.style.setProperty("--bottomMostVisiblePage",h.bottomMostVisiblePage),l.current.style.setProperty("--commentsBefore",h.pageWiseCommentsBefore[h.topMostVisiblePage]),l.current.style.setProperty("--commentsAfter",h.pageWiseCommentsAfter[h.bottomMostVisiblePage]));f&&(f.current.innerHTML=h.visiblePagesStyles)}()},sidebarMode:j,userId:r,visiblePagesStylesRef:f}},p.a.createElement("div",{className:"PageBook pos-abs stretch-to-fit f-vert",ref:l,style:{"--topMostVisiblePage":h.topMostVisiblePage,"--bottomMostVisiblePage":h.bottomMostVisiblePage,"--commentsBefore":null===(t=h.pageWiseCommentsBefore)||void 0===t?void 0:t[h.topMostVisiblePage],"--commentsAfter":null===(a=h.pageWiseCommentsAfter)||void 0===a?void 0:a[h.bottomMostVisiblePage]}},p.a.createElement("style",{ref:f},h.visiblePagesStyles),p.a.createElement("section",{className:"row main-section"},p.a.createElement("div",{className:"col left-sidebar pos-rel"},p.a.createElement(Y,null),p.a.createElement(B.a,{className:(null===R||void 0===R?void 0:R.pdf)?"":"active"})),p.a.createElement(J,{sidebarMode:j})),p.a.createElement(E.a,null,p.a.createElement("div",{className:"icon icon-arrow_left f-order-m1 super-center",onClick:S.e.goBack}),p.a.createElement("div",{className:"col"}),p.a.createElement(N.a,{className:"mr-12",value:"public"===q?1:0,style:{width:"200px"}},p.a.createElement("div",{className:"super-center capitalize",onClick:function(){return x("note")}},"Private"),p.a.createElement("div",{className:"super-center capitalize",onClick:function(){return x("comment")}},"Public")),p.a.createElement("div",{className:"col-ext row spc-x-8",style:{maxWidth:"var(--rightSidebarWidth)"}},p.a.createElement("div",{className:"col text-right mr-12 one-line f-vert f-justify-center"},p.a.createElement("h5",{className:"col-12 b-700 one-line"},g?g.title:"PageBook Title"),p.a.createElement("div",{className:"h7 text-muted one-line"},"Group: ",b?b.title:"Group Title")),p.a.createElement("div",{className:"icon icon-refresh super-center",onClick:F}))),p.a.createElement(v.a,{path:"*/thread/:id",component:M}),p.a.createElement(W,{path:"*/new-comment",timeout:{exit:1e3},render:X})));function F(){return Q.apply(this,arguments)}function Q(){return(Q=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(S.b)("get","book-full/"+n.bookId);case 5:t=e.sent,(a=t.data)&&Object(S.d)(["SET_DATA",a]);case 8:return e.prev=8,e.finish(8);case 10:case"end":return e.stop()}}),e,null,[[2,,8,10]])})))).apply(this,arguments)}function V(){return(V=Object(m.a)(i.a.mark((function e(){var t,a,n,r,c,A,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=null===g||void 0===g?void 0:g.file)){e.next=15;break}return(a=C.c.getDocument(t)).onProgress=function(e){var t=e.loaded,a=e.total;return console.log(t/a*100)},e.next=6,a.promise;case 6:for(n=e.sent,r=new Array(n.numPages),c=0;c<r.length;++c)r[c]=n.getPage(c+1);return e.next=11,Promise.all(r);case 11:A=e.sent,s=K(A,1.5),Z({pdf:n,pages:A,viewports:s}),h.pdf={pdf:n,pages:A,viewports:s};case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return e.map((function(e){return e.getViewport({scale:t})}))}})))),Object(D.a)(I,["publicPrivateMode","sidebarMode","setSidebarMode","categorized","pageWiseComments","userId","pdf","BookContextLocal"],Object(d.memo)((function(e){var t=e.publicPrivateMode,a=e.sidebarMode,n=e.setSidebarMode,r=e.categorized,c=e.pageWiseComments,A=e.userId,s=e.pdf,o=e.BookContextLocal,l=Object(d.useState)(!1),i=Object(u.a)(l,2),m=i[0],v=i[1],b=0,E=h.a.mapValues(c,(function(e){return e.filter((function(e){var n=e.comment_type===a&&(!m||(m||"private"===t)&&e.user_id===A);return n&&++b,n}))})),w=b,j=0;return o.pageWiseCommentsBefore=[],o.pageWiseCommentsAfter=[],p.a.createElement("div",{className:"RightSidebar row pos-rel p-12 pl-0 mode-".concat(a)},p.a.createElement("div",{className:"vertical-tabs f-vert"},p.a.createElement("div",{className:"col",style:{maxHeight:"14px"}}),"public"===t?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"question"===a?"active":"",onClick:function(){return n("question")}},p.a.createElement("img",{src:O.a,alt:""}),p.a.createElement("div",{className:"vertical-text px-4"},"Questions ",p.a.createElement("span",{className:"h7"},r.question.length)),p.a.createElement("img",{src:O.a,alt:""})),p.a.createElement("div",{className:"comment"===a?"active":"",onClick:function(){return n("comment")}},p.a.createElement("img",{src:O.a,alt:""}),p.a.createElement("div",{className:"vertical-text px-4"},"Comments ",p.a.createElement("span",{className:"h7"},r.comment.length)),p.a.createElement("img",{src:O.a,alt:""}))):p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"note"===a?"active":"",onClick:function(){return n("note")}},p.a.createElement("img",{src:O.a,alt:""}),p.a.createElement("div",{className:"vertical-text px-4"},"Notes ",p.a.createElement("span",{className:"h7"},r.note.length)),p.a.createElement("img",{src:O.a,alt:""})),p.a.createElement("div",{className:"highlight"===a?"active":"",onClick:function(){return n("highlight")}},p.a.createElement("img",{src:O.a,alt:""}),p.a.createElement("div",{className:"vertical-text px-4"},"Highlights ",p.a.createElement("span",{className:"h7"},r.highlight.length)),p.a.createElement("img",{src:O.a,alt:""}))),p.a.createElement("span",{className:"col"})),p.a.createElement("div",{className:"col trim"},p.a.createElement(g.a,{disableTracksWidthCompensation:!0},p.a.createElement("div",{className:"py-6 f-vert"},h.a.map(E,(function(e,t){for(var a=b-w,n=j;n<t;++n)o.pageWiseCommentsBefore[n]=a,o.pageWiseCommentsAfter[n]=w;if(j=t,e.length)return o.pageWiseCommentsBefore[t]=a,w-=e.length,o.pageWiseCommentsAfter[t]=w,p.a.createElement(U,Object.assign({p:e,i:t},{key:t}));o.pageWiseCommentsBefore[t]=a,o.pageWiseCommentsAfter[t]=w})),function(){for(var e=b-w,t=j;t<(null===s||void 0===s?void 0:s.pages.length);++t)o.pageWiseCommentsBefore[t]=e,o.pageWiseCommentsAfter[t]=w}(),p.a.createElement("hr",{className:"mx-12"}),p.a.createElement("div",{style:{height:"28px"}}),p.a.createElement("div",{className:"pos-sty top-controls f-order-m1 f-vert mt-m6"},"highlight"!==a?p.a.createElement("div",{className:"row spc-12 f-vert"},"public"===t?p.a.createElement(N.a,{value:+m},p.a.createElement("div",{className:"super-center capitalize",onClick:function(){return v(!1)}},"All ",a,"s"),p.a.createElement("div",{className:"super-center capitalize",onClick:function(){return v(!0)}},"My ",a,"s")):void 0,p.a.createElement("input",{type:"text",placeholder:" \uf002  Filter"})," "):void 0,p.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7"}," ".concat(a),"s above",p.a.createElement("i",{className:"icon-chevron_up icon px-4"}))))),p.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7 bottom"}," ".concat(a),"s below",p.a.createElement("i",{className:"icon-chevron_down icon px-4"})),"note"===a?p.a.createElement(f.b,{className:"add-note fa fa-plus button"}):void 0))}))),Object(D.a)(I,["publicPrivateMode","selection","book","setSelection","setSidebarMode","userId","BookContextLocal"],Object(d.memo)((function(e){var t=e.publicPrivateMode,a=e.selection,n=e.book,r=e.setSelection,c=e.setSidebarMode,A=e.userId,s=e.BookContextLocal,o=Object(d.useState)({}),l=Object(u.a)(o,2),i=l[0],m=l[1];return Object(k.b)({componentWillMount:function(){return s.setBubblePos=m}}),p.a.createElement("div",{className:"new-bubble pos-abs f-end f-justify-center h7",style:i},"public"===t?p.a.createElement(p.a.Fragment,null,p.a.createElement(f.b,{to:S.e.location.pathname+"/new-comment",className:"py-4 px-8 text-right",onClick:function(){return c("question")}},"Question"),p.a.createElement(f.b,{to:S.e.location.pathname+"/new-comment",className:"py-4 px-8",onClick:function(){return c("comment")}},"Comment")):p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"py-4 px-8 text-center",onClick:function(){c("highlight"),Object(S.b)("post","comment",{body:"Highlight",hashtags:"",selection_data:JSON.stringify([a]),user_id:A,book_id:n.id,comment_type:"highlight"}).then((function(e){var t=e.data;Object(S.d)(["SET_DATA",t]),r(void 0),m({})}))}},"Highlight")))}))));function U(e){var t=e.p,a=e.i,n=Object(d.useRef)();return Object(d.useEffect)((function(){n.current.style.setProperty("--height",n.current.children[0].clientHeight+"px")})),p.a.createElement("div",Object.assign({key:a,id:"page-".concat(a,"-comments"),className:"PageWiseComments trim-y"},{ref:n}),p.a.createElement("div",{className:"px-6 pb-12 f-vert"},p.a.createElement("hr",{className:"mb-8 mx-6"}),p.a.createElement("div",Object.assign({className:"px-6 h7 f-center pagewise-header"},{onClick:function(){document.querySelector('.Page[data-page-index="'.concat(a,'"]')).scrollIntoView({behavior:"smooth"})}}),p.a.createElement("h3",null,"Page ",+a+1)),t.map((function(e){return p.a.createElement("div",{className:"m-6",key:e.id},p.a.createElement(j.a,{commentId:e.id}))}))))}var R=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loaded:!1},n.setLoaded=function(e){return n.setState({loaded:e})},e.loaders[e.i]=n.setLoaded,n}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.viewport,n=e.i,r=e.pageComments;return p.a.createElement("div",{className:"pos-rel f-super-center Page",style:h.a.pick(a,["width","height"]),"data-page-index":n},this.state.loaded?p.a.createElement(p.a.Fragment,null,p.a.createElement(C.a,{page:t,viewport:a,className:"card"}),p.a.createElement(C.b,{page:t,viewport:a,pageComments:r})):void 0)}}]),a}(x.a),X=Object(D.a)(I,["sidebarMode","selection","setSelection","book","userId"],Object(d.memo)((function(e){var t=e.sidebarMode,a=e.selection,n=e.setSelection,r=e.book,c=e.userId,A=e.animatedProps,s=Object(d.useRef)(),o=Object(d.useRef)(),l=Object(k.c)({showSpinner:!1,active:!1});return Object(k.b)({componentDidMount:function(){l.active=!0,s.current.classList.add("active")}}),A.componentWillExit=function(){l.active=!1,s.current.classList.remove("active"),o.current.innerHTML=""},p.a.createElement("div",Object.assign({className:"NewPublicComment pos-abs stretch-to-fit"+(l.active?" active":"")},{ref:s}),p.a.createElement("style",{ref:o},".PageBook .RightSidebar{transform: translateX(100%)}"),p.a.createElement("div",{className:"p-12"},p.a.createElement("form",{className:"col-12 row spc-12 card pos-rel",style:{width:"480px"},onSubmit:function(e){return u.apply(this,arguments)}},p.a.createElement("div",{className:"close-btn",onClick:S.e.goBack}),p.a.createElement("div",{className:"capitalize"},"New ",t),p.a.createElement("blockquote",{className:"col-12 h7 text-muted mt-2 row"},p.a.createElement("div",{className:"trim col"},null===a||void 0===a?void 0:a.text)),p.a.createElement("textarea",{required:!0,className:"col-12",placeholder:t,name:"body"}),p.a.createElement("div",{className:"col-12"}),p.a.createElement("div",{className:"bottom-row col-12 col-ext row spc-12"},p.a.createElement("div",{className:"col"}),p.a.createElement("div",{className:"button outline",onClick:S.e.goBack},"Cancel"),p.a.createElement("button",null,"Post")))),p.a.createElement(B.a,{className:l.showSpinner?"active":""}));function u(){return(u=Object(m.a)(i.a.mark((function e(A){var s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.preventDefault(),e.prev=1,v(!0),s={body:A.target.body.value,selection_data:JSON.stringify([a]),user_id:c,book_id:r.id,comment_type:t},console.log(s),e.next=7,Object(S.b)("post","comment",s);case 7:o=e.sent,l=o.data,Object(S.d)(["SET_DATA",l]),n(),S.e.goBack();case 12:return e.prev=12,v(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,,12,15]])})))).apply(this,arguments)}function v(e){l.showSpinner=e;var t=s.current.querySelector(".spinner");e?t.classList.add("active"):t.classList.remove("active")}})))},,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(29),r=a(34),c=a(0),A=a.n(c);a(104);function s(e){var t=e.value,a=e.className,s=e.children,o=e.vertical,l=Object(r.a)(e,["value","className","children","vertical"]),i=Number.isInteger(t)?t:-1,m=o?"height":"width";return A.a.createElement("div",Object.assign({},l,{className:"segment-controls row "+(a||"")}),A.a.createElement("div",{className:"highlight",style:Object(n.a)({transform:o?"translateY(".concat(100*i,"%)"):"translateX(".concat(100*i,"%)")},m,100/s.length+"%")}),s.map((function(e,t){return A.a.createElement(c.Fragment,{key:t},e)})))}},function(e,t,a){"use strict";a.d(t,"c",(function(){return A})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(3),r=a.n(n),c=a(7),A=function(e){return Array.from(e.parentNode.children).indexOf(e)};function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(console.warn("getSelectionOffsetFromParent: Will fail if whitespaces are present");;){if(e===t)return a;e.previousSibling?a+=(e=e.previousSibling).innerText?e.innerText.length:e.length:e=e.parentNode}}function o(e,t){var a=function(t,a,n){return n-e[t]>=e[a]-n?a:t},n=e.length;if(t<=e[0])return 0;if(t>=e[n-1])return n-1;for(var r=0,c=n,A=0;r<c;){if(e[A=r+c>>1]===t)return A;if(t<e[A]){if(A>0&&t>e[A-1])return a(A-1,A,t);c=A}else{if(A<n-1&&t<e[A+1])return a(A,A+1,t);r=A+1}}return A}var l=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(e){return a(e)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(29),r=a(21),c=a(23),A=a(22),s=a(0),o=a(8),l=a.n(o),i=function(e){Object(c.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(r.a)(this,a);for(var c=arguments.length,A=new Array(c),s=0;s<c;s++)A[s]=arguments[s];return(e=t.call.apply(t,[this].concat(A))).twoWayBind=function(t){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onChange",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return a={},Object(n.a)(a,c,e.state[t]),Object(n.a)(a,r,(function(a){return e.setState(Object(n.a)({},t,a.target[c]))})),a},e.otherState={},e.setOtherState=function(t){return l.a.forIn(t,(function(t,a){return e.otherState[a]=t}))},e}return a}(s.PureComponent)},,,function(e,t,a){"use strict";a.d(t,"b",(function(){return A})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o}));var n=a(9),r=a(5),c={dev:{mode:"dev",url:"http://localhost:23862/api/"},stage:{mode:"stage",url:"https://bbbook-gs.herokuapp.com/api/"},prod:{mode:"prod",url:"https://www.bbbook.ca/api/"}},A=JSON.stringify(Object(r.a)({userId:null,USERS:{},GROUPS:{},BOOKS:{},COMMENTS:{},SELECTIONS:{},UI_DARKMODE:"auto",version:"0.0.20 "+c.stage.mode},c.stage)),s=JSON.parse(A);function o(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),c=1;c<t;c++)a[c-1]=arguments[c];return a.forEach((function(t){var a=Object(n.a)(t,2),c=a[0],A=a[1];console.log(c,A,s),s=Object(r.a)(Object(r.a)({},e),l(e,c,A)),e=s})),s}function l(e,t,a){switch(t){case"SET_STATE":return a;case"SET_UI_DARKMODE":return{UI_DARKMODE:a};case"SET_DATA":return{USERS:Object(r.a)(Object(r.a)({},e.USERS),i(a.users)),GROUPS:Object(r.a)(Object(r.a)({},e.GROUPS),i(a.groups)),BOOKS:Object(r.a)(Object(r.a)({},e.BOOKS),i(a.books)),COMMENTS:Object(r.a)(Object(r.a)({},e.COMMENTS),i(a.comments)),SELECTIONS:Object(r.a)(Object(r.a)({},e.SELECTIONS),m(a.comments))};case"LOGIN":return Object(r.a)({userId:a.userId},l(e,"SET_DATA",a));default:return{}}}function i(e){if(!e||!e.length)return{};var t={};return e.forEach((function(e){return t[e.id]=e})),t}function m(e){if(!e||!e.length)return{};var t={};return e.forEach((function(e){t[e.id]=JSON.parse(e.selection_data||"[]"),delete e.selection_data})),t}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return g}));var n=a(3),r=a.n(n),c=a(7),A=a(9),s=a(0),o=a.n(s),l=a(37),i=a(8),m=a.n(i),u=(a(16),a(30));l.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(l.version,"/pdf.worker.js"),t.c=l;var d=Object(s.memo)((function(e){var t=e.page,a=e.viewport,n=e.className,r=Object(s.useState)(void 0),c=Object(A.a)(r,2),l=c[0],i=c[1];if(l)return o.a.createElement("img",Object.assign({alt:""},{className:n,src:l}));var m=document.createElement("canvas"),u=m.getContext("2d");m.height=a.height,m.width=a.width,t.render({canvasContext:u,viewport:a}).promise.then((function(){return i(m.toDataURL())}))})),p=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getTextContent();case 3:return n=e.sent,c=document.createElement("div"),e.next=7,l.renderTextLayer({textContent:n,container:c,viewport:a,textDivs:[]}).promise;case 7:return e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(e){return"<mark-".concat(e.id,' id="a-').concat(e.id,"-").concat(e.i,'" class="highlight">')},f=function(e){return"</mark-".concat(e.id,">")},g=Object(s.memo)((function(e){var t=e.page,a=e.viewport,n=e.pageComments,r=Object(s.useState)(void 0),c=Object(A.a)(r,2),l=c[0],i=c[1];return p(t,a).then((function(e){if(n){var t=[];n.forEach((function(e){(u.c.SELECTIONS[e.id]||[]).forEach((function(a,n){return a.data.forEach((function(a){t[a.startLine]||(t[a.startLine]=[]),t[a.startLine].push({id:e.id,i:n,offset:a.startOffset,start:!0}),t[a.endLine]||(t[a.endLine]=[]),t[a.endLine].push({id:e.id,i:n,offset:a.endOffset,start:!1})}))}))}));var a=[];Array.from(e.children).forEach((function(e,n){var r=t[n],c=a.map(v);r?(r.sort((function(e,t){return e.offset-t.offset})),r.forEach((function(t,n){c.push(m.a.escape(e.innerText.substring(0===n?0:r[n-1].offset,r[n].offset))),t.start?(c.push(v(t)),a.push(t)):(c.push(a.map(f).join("")),a.splice(a.findIndex((function(e){return e.id===t.id})),1),c.push(a.map(v).join("")))})),c.push(m.a.escape(e.innerText.substring(r.pop().offset,e.innerText.length))),c.push(a.map(f).join(""))):c.push(e.innerHTML),e.innerHTML=c.join("")}))}i(e.innerHTML)})),l?o.a.createElement("div",{className:"text-layer pos-abs stretch-to-fit",dangerouslySetInnerHTML:{__html:l}}):o.a.createElement(o.a.Fragment,null)}))},function(e,t,a){"use strict";var n=a(9),r=a(0),c=a.n(r),A=a(4),s=(a(117),a(1)),o=a(14),l=a(6),i=Object(l.a)(s.a,["COMMENTS","USERS","userId","SELECTIONS"],Object(r.memo)((function(e){var t,l=e.children,m=e.commentId,u=e.showChildren,d=void 0!==u&&u,p=e.COMMENTS,v=e.USERS,f=e.userId,g=e.SELECTIONS,b=Object(r.useState)(),h=Object(n.a)(b,2),E=h[0],N=h[1],w=p[m],O=v[null===w||void 0===w?void 0:w.user_id];if(w){var j,x=g[m]||[];return t=c.a.createElement(c.a.Fragment,null,x.map((function(e,t){return c.a.createElement("blockquote",{key:t,className:"h7 text-muted mt-2 row cur-p",onClick:function(){var e;return null===(e=document.getElementById("a-".concat(m,"-0")))||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})}},c.a.createElement("div",{className:"trim col"},null===e||void 0===e?void 0:e.text))})),c.a.createElement("div",{className:"h8 my-2 text-right"},new Date(w.created_at).toLocaleString())," ",c.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b row spc-8 spc-x-12 f-center"},c.a.createElement("div",{className:"col"}),c.a.createElement("i",{className:"icon icon-reply h6"}),c.a.createElement("div",{className:"h7 ml-0"},w.reply_ids.length),c.a.createElement(A.b,{className:"button super-center",to:(null===(j=s.e.location)||void 0===j?void 0:j.pathname)+"/thread/"+m},"Open Thread"),f+""===w.user_id+""?c.a.createElement(c.a.Fragment,null,E?c.a.createElement("div",{className:"edit-form-open pos-abs stretch-to-fit",onClick:function(){return N(!1)}}):void 0,c.a.createElement("div",{className:"px-12 py-8 col-ext pos-rel f-self-stretch f-center cur-p",onClick:function(){return N(!0)}},c.a.createElement("i",{className:"fa fa-ellipsis-v"}),c.a.createElement("div",{className:"edit-form pos-abs card trim"+(E?" active":" ")},c.a.createElement("div",{className:"px-12 py-8 f-center",onClick:function(){var e;Object(o.b)(c.a.createElement("div",{className:"row spc-12",style:{maxWidth:"320px"}},c.a.createElement("div",{className:"col-12"},"Do you want to delete this comment?"),c.a.createElement("div",{className:"Comment card col-12 row f-vert spc-12"},c.a.createElement("div",{className:"o ne-line"},w.body),c.a.createElement("blockquote",{className:"h7 text-muted mt-2 row"},null===(e=g[m])||void 0===e?void 0:e.map((function(e,t){return c.a.createElement("div",{key:t,className:"trim col"},null===e||void 0===e?void 0:e.text)}))),c.a.createElement("div",{className:"h8 my-2 text-right"},new Date(w.created_at).toLocaleString())," "),c.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},c.a.createElement("button",{className:"outline",onClick:function(){return Object(o.b)()}},"Cancel"),c.a.createElement("button",{onClick:function(){Object(s.b)("delete","comment",{comment_id:m}).then((function(e){var t=e.data;Object(o.b)(),Object(s.d)(["SET_DATA",t])}))}},"OK"))))}},c.a.createElement("i",{className:"icon-cross_mark mr-8"}),"Delete")))):void 0)),c.a.createElement(c.a.Fragment,null,c.a.createElement("style",null,"\n\t\t\t\t\tmark-".concat(m,".highlight.highlight{\n\t\t\t\t\t\t--alpha: 1;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t")),c.a.createElement("div",{className:"Comment"},c.a.createElement("div",{id:"b-".concat(m),className:"id-tag"}),c.a.createElement("div",{className:"row pb-4 top-row"},w.hidden?void 0:c.a.createElement(c.a.Fragment,null),c.a.createElement("div",{className:"col"}),c.a.createElement("div",{className:"h7 text-muted"},"@",O.username),c.a.createElement("img",{className:"pos-rel",src:a(40),alt:"User icon"})),c.a.createElement("div",{className:"card row f-vert spc-12"},c.a.createElement("div",{className:"comment-body o ne-line"},w.hidden?"[Deleted]":w.body),w.hidden?void 0:t)),d&&(l||!!(null===w||void 0===w?void 0:w.reply_ids.length))&&c.a.createElement("div",{className:"reply col-ext row spc-12"},c.a.createElement("div",{className:"col col-ext-x col-ext-t row spc-12 f-vert"},null===w||void 0===w?void 0:w.reply_ids.map((function(e){return c.a.createElement(i,Object.assign({key:e},{commentId:e,showChildren:d}))})),l)))}return null})));t.a=i},,function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=(a(111),a(1)),A=a(6);t.a=Object(A.a)(c.a,["version"],Object(n.memo)((function(e){var t=e.children,a=e.version;return r.a.createElement("header",{className:"Header row spc-x-8 f-center pos-sty f-order-m1"},r.a.createElement("h3",{className:"logo small-caps f-center ml-12"},r.a.createElement("span",{className:"b-800"},"BB"),"B",r.a.createElement("span",{className:"b-600"},"ook"),r.a.createElement("sup",{className:"h7 normal-caps ml-4",style:{height:"auto"}},"Pre-Alpha ",r.a.createElement("b",{className:"b-900"},a))),t)})))},,,,,function(e,t){e.exports="data:image/jpeg;base64,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"},,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return L}));var n=a(0),r=a.n(n),c=a(10),A=(a(80),a(1)),s=a(4),o=(a(103),a(24)),l=a(6),i={home:0,notifications:1,groups:2,library:3,recents:4},m=Object(l.a)(A.a,["USERS","userId","version"],Object(c.i)(Object(n.memo)((function(e){var t,n=e.location,c=e.USERS,l=e.userId,m=e.version,u=c[l],d=null!==(t=i[n.pathname.split("/")[1]])&&void 0!==t?t:-1;return r.a.createElement("section",{id:"Sidemenu",className:"f-vert pos-abs stretch-to-fit"},r.a.createElement("div",{className:"py-24 text-center"},r.a.createElement("h5",{style:{color:"white",fontWeight:"300"}},r.a.createElement("b",null,"BB"),"Book ",r.a.createElement("sup",{className:"h7"},"Pre-Alpha")),r.a.createElement("div",{className:"h8"},"v",m)),r.a.createElement("div",{className:"px-12"},r.a.createElement(o.a,{className:"f-vert val-"+d,value:d,vertical:!0},r.a.createElement(s.c,{className:"p-12",to:"/home"},"Home"),r.a.createElement(s.c,{className:"p-12",to:"/notifications"},"Notifications"),r.a.createElement(s.c,{className:"p-12",to:"/groups"},"Groups"),r.a.createElement(s.c,{className:"p-12",to:"/library"},"Library"),r.a.createElement(s.c,{className:"p-12",to:"/recents"},"Recents"))),r.a.createElement("div",{className:"col"}),r.a.createElement(s.c,{to:"/user|"+l,className:"user-card card m-12 p-12 row"},r.a.createElement("div",{style:{width:"calc(100% - 56px)"}},r.a.createElement("div",{className:"h7 text-muted"},"@",u?u.username:"@Username"),r.a.createElement("div",{className:"one-line col-12 pb-24"},u?u.first_name:"Firstname"," ",u?u.last_name:"Lastname"),r.a.createElement("div",{className:"h7 text-muted heading"},u?u.email:"user@email.com")),r.a.createElement("img",{className:"profile-icon f-self-start ml-12",src:a(40),alt:"default-profile-icon"})),r.a.createElement("div",{className:"bottom-row row spc-12 super-center h7"},r.a.createElement("div",{onClick:A.f},"Log out"),r.a.createElement("span",{className:"text-muted"},"|"),r.a.createElement("div",null,"Switch User")))})))),u=a(9),d=a(11),p=(a(110),a(35)),v=(a(112),a(113),Object(n.memo)((function(e){var t=e.thumbnail,a=e.className,n=e.children;return r.a.createElement("div",{className:"BookThumbnail square layered "+(t?"":"null ")+a},t?r.a.createElement("img",{src:t,alt:"book thumbnail"}):r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 500 500"},r.a.createElement("g",{transform:"matrix(1.25,0,0,1,0,0)"},r.a.createElement("g",{transform:"matrix(2.5,0,0,3.125,-880,-700)"},r.a.createElement("path",{d:"M512,260.166C512,255.922 510.314,251.853 507.314,248.852C501.791,243.33 492.67,234.209 487.148,228.686C484.147,225.686 480.078,224 475.834,224L364.8,224C361.405,224 358.149,225.349 355.749,227.749C353.349,230.15 352,233.405 352,236.8L352,371.2C352,374.595 353.349,377.85 355.749,380.251C358.15,382.651 361.405,384 364.8,384L499.2,384C502.595,384 505.85,382.651 508.251,380.251C510.651,377.851 512,374.595 512,371.2L512,260.166Z"})))),n)}))),f=Object(l.a)(A.a,["BOOKS","userId"],Object(n.memo)((function(e){var t,A,o,l,i,m,u,d,p,f,g,b=e.BOOKS,h=e.userId,E=e.group,N=e.className,w=Object(c.g)().pathname,O=E.book_ids.map((function(e){return b[e]}));null===(t=E.group_members.find((function(e){return e.user_id===h})))||void 0===t||t.member_type;return r.a.createElement(s.b,{to:w+"/group|"+E.id,className:"Group p-8 "+N},r.a.createElement("div",{className:"group-title f-center"},r.a.createElement("img",{className:"banner m-8 mr-12 well",src:a(68),alt:"Banner"}),r.a.createElement("div",{style:{width:"calc(100% - 164px)"}},r.a.createElement("div",{className:"col-12 one-line"},E.title),r.a.createElement("div",{className:"col-12 one-line h7 text-muted"},E.bio))),r.a.createElement("div",{className:"row spc-12 mx-m12"},Object(n.createElement)((null===(A=O[0])||void 0===A?void 0:A.id)?s.b:"div",{to:w+"/book|"+(null===(o=O[0])||void 0===o?void 0:o.id),className:"col-4 book f-vert"},r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{thumbnail:null===(l=O[0])||void 0===l?void 0:l.thumbnail}),r.a.createElement("div",{className:"pt-8"},r.a.createElement("div",{className:"one-line"},null===(i=O[0])||void 0===i?void 0:i.title),r.a.createElement("div",{className:"h7 text-muted one-line"},null===(m=O[0])||void 0===m?void 0:m.description)))),Object(n.createElement)((null===(u=O[1])||void 0===u?void 0:u.id)?s.b:"div",{to:w+"/book|"+(null===(d=O[1])||void 0===d?void 0:d.id),className:"col-4 book f-vert"},r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{thumbnail:null===(p=O[1])||void 0===p?void 0:p.thumbnail}),r.a.createElement("div",{className:"pt-8"},r.a.createElement("div",{className:"one-line"},null===(f=O[1])||void 0===f?void 0:f.title),r.a.createElement("div",{className:"h7 text-muted one-line"},null===(g=O[1])||void 0===g?void 0:g.description)))),r.a.createElement("div",{className:"well col-4 row spc-12"},O.slice(2,6).map((function(e){return r.a.createElement(v,{className:"col-6",thumbnail:null===e||void 0===e?void 0:e.thumbnail})})),r.a.createElement(v,{className:"col-6"}),r.a.createElement(v,{className:"col-6"}),r.a.createElement(v,{className:"col-6"}),r.a.createElement(v,{className:"col-6"}),r.a.createElement("hr",{className:"col-12 mb-0"}),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"one-line"},O.length," Books"),r.a.createElement("div",{className:"h7 text-muted one-line"},"3 Shelves")))),r.a.createElement("div",{className:"text-right h7 text-muted mt-m4"},"Last Visited: 8 Hours ago"))}))),g=a(16),b=(Object(l.a)(A.a,["userId","USERS","GROUPS"],Object(n.memo)((function(e){var t=e.userId,a=e.USERS,c=e.GROUPS;Object(n.useEffect)(v,[t]);var s=a[t],o=Object(n.useState)(!0),l=Object(u.a)(o,2),i=l[0],m=l[1];function v(){t&&(m(!0),Object(A.b)("get","groups-full").then((function(e){var t=e.data;t&&Object(A.d)(["SET_DATA",t])})).catch(console.error).finally((function(){return m(!1)})))}return r.a.createElement("div",{id:"PageDashboard"},r.a.createElement(d.a,{disableTracksWidthCompensation:!0,className:"pos-abs stretch-to-fit"},r.a.createElement("div",{className:"f-vert"},r.a.createElement("div",{className:"container col-12 row spc-12"},r.a.createElement("input",{className:"col-12",type:"search"}),r.a.createElement("hr",{className:"col-12"}),((null===s||void 0===s?void 0:s.group_members)||[]).map((function(e){var t=c[null===e||void 0===e?void 0:e.group_id];return t?r.a.createElement(f,Object.assign({className:"col-4"},{key:null===e||void 0===e?void 0:e.group_id,group:t})):void 0}))),r.a.createElement(p.a,null,r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"icon icon-refresh super-center",onClick:v})))),r.a.createElement(g.a,{className:i?"active":""}))}))),a(18)),h=a(3),E=a.n(h),N=a(7),w=a(21),O=a(26),j=a(23),x=a(22),S=a(8),y=a.n(S),M=(a(152),a(27)),B=a(14),C=JSON.stringify({mode:0,showSpinner:!1}),k=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state=JSON.parse(C),e.login=function(){var t=Object(N.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({showSpinner:!0}),t.prev=2,t.next=5,Object(A.b)("post","login",y.a.pick(e.state,["email","password"]));case 5:n=t.sent,(r=n.data)&&Object(A.d)(["LOGIN",r]);case 8:return t.prev=8,e.setState({showSpinner:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[2,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e.signUp=function(){var t=Object(N.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({showSpinner:!0}),t.prev=2,t.next=5,Object(A.b)("post","register",y.a.pick(e.state,["email"]));case 5:e.setState(JSON.parse(C)),Object(B.b)(r.a.createElement("div",{className:"row spc-12",style:{maxWidth:"320px"}},r.a.createElement("div",{className:"col-12 h5"},"\u2713 Email Sent"),r.a.createElement("div",{className:"col-12 h7 text-muted"},"We just sent an email to ",r.a.createElement("b",{className:"text-unmuted"},e.state.email),". Check your email to complete your sign-up!",r.a.createElement("br",null),r.a.createElement("br",null),"If you did not receive any emails from us, don't forget to check your spam folder!"),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},r.a.createElement("button",{onClick:function(){return Object(B.b)()}},"OK"))));case 7:return t.prev=7,e.setState({showSpinner:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(O.a)(a,[{key:"render",value:function(){var e=this,t=this.login,a=this.signUp,n=this.props,c=n.location,s=n.history,l=this.state,i=l.mode,m=l.showSpinner,u=this.context.version;return A.i&&s.replace(c.pathname.replace("/login","")),r.a.createElement("div",{id:"PageLogin",className:"pos-abs stretch-to-fit"},r.a.createElement("div",{className:"container row p-32"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"heading py-32"},"BBBook",r.a.createElement("sup",{className:"h7 normal-caps ml-8",style:{height:"auto"}},"Pre-Alpha ",u))),r.a.createElement("div",{className:"card row spc-16 f-vert pos-rel",style:{width:"360px"}},r.a.createElement(o.a,{value:i},r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({mode:0})}},"Log In"),r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({mode:1})}},"Sign up")),0===i?r.a.createElement("form",{className:"row spc-16 f-vert col col-ext pos-rel trim",onSubmit:t},r.a.createElement("div",null,r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"h7 text-muted"},"Enter the BBBook portal.")),r.a.createElement("div",{className:"col"}),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Email"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("email"),{name:"email",type:"email",autoComplete:"email"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Password"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("password"),{name:"password",type:"password",pattern:A.h,autoComplete:"current-password"})),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b text-right row f-vert spc-x-16 spc-y-12"},r.a.createElement("button",null,"Log In"),r.a.createElement("hr",{className:"col-ext-x"}),r.a.createElement("div",{className:"h7 text-right my-2",onClick:function(){return e.setState({mode:1})}},"New to BBBook? Sign up!"))):r.a.createElement("form",{className:"row spc-16 f-vert col col-ext pos-rel trim",onSubmit:a},r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"h7 text-muted"},"Enter the BBBook portal.")),r.a.createElement("div",{className:"col"}),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Email"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("email"),{name:"email",type:"email"})),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b text-right row f-vert spc-x-16 spc-y-12"},r.a.createElement("button",null,"Sign Up"),r.a.createElement("hr",{className:"col-ext-x"}),r.a.createElement("div",{className:"h7 text-right my-2",onClick:function(){return e.setState({mode:0})}},"Have an account? Log in!"))))),r.a.createElement(g.a,{className:m?"active":""}))}}]),a}(M.a);k.contextType=A.a;a(153);var D=a(5),G=a(34);function P(e){var t=e.value,a=e.className,c=e.children,A=Object(G.a)(e,["value","className","children"]),s=Number.isInteger(t)?t:-1;return r.a.createElement("div",Object.assign({},A,{className:"TabsRow row "+(a||"")}),(c||[]).map((function(e,t){return Object(n.createElement)(e.type,Object(D.a)(Object(D.a)({},e.props),{},{className:(e.props.className||"")+(t===s?" active":"")}))})))}var W=Object(l.a)(A.a,["userId","USERS","GROUPS"],Object(n.memo)((function(e){var t=e.userId,a=e.USERS,c=e.GROUPS;Object(n.useEffect)(v,[t]);var o=a[t],l=Object(n.useState)(!0),i=Object(u.a)(l,2),m=i[0],p=i[1];function v(){t&&(p(!0),Object(A.b)("get","groups-full").then((function(e){var t=e.data;t&&Object(A.d)(["SET_DATA",t])})).catch(console.error).finally((function(){return p(!1)})))}return r.a.createElement("section",{id:"PageGroups"},r.a.createElement(d.a,{disableTracksWidthCompensation:!0,className:"pos-abs stretch-to-fit"},r.a.createElement("div",{className:"container col-12"},r.a.createElement("div",{className:"row f-center px-12"}," ",r.a.createElement("h1",{className:"py-16",style:{fontSize:"48px"}},"Groups"),r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"icon icon-refresh super-center well",onClick:v})," "),r.a.createElement("hr",{style:{transform:"rotate(180deg)"}}),r.a.createElement("div",{className:"row spc-x-12 f-center"},r.a.createElement(P,{value:0,className:"col-ext-x"},r.a.createElement("div",null,"All Groups"),r.a.createElement("div",null,"My Groups")),r.a.createElement("div",{className:"col"}),r.a.createElement("input",{type:"search",className:"col-4"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"groups row spc-16"},((null===o||void 0===o?void 0:o.group_members)||[]).map((function(e){var t=c[null===e||void 0===e?void 0:e.group_id];return t?r.a.createElement(f,Object.assign({className:"col-4"},{key:null===e||void 0===e?void 0:e.group_id,group:t})):void 0}))))),r.a.createElement(s.b,{className:"button f-center f-horz-rev pos-abs create-group-btn p-0",to:A.e.location.pathname+"/edit-group/0"},r.a.createElement("i",{className:"fa fa-plus super-center h5"}),r.a.createElement("div",{className:"super-center pl-24 pr-12 one-line"},"Create Group")),r.a.createElement(g.a,{className:m?"active":""})," ")}))),I=(a(154),function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e.showSpinner=!0,e.componentDidMount=Object(N.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.props.match.params.id),t.prev=1,t.next=4,Object(A.b)("post","get-email",{id:e.props.match.params.id});case 4:a=t.sent,n=a.data,e.setState({email:n});case 7:return t.prev=7,e.showSpinner=!1,e.forceUpdate(),t.finish(7);case 11:case"end":return t.stop()}}),t,null,[[1,,7,11]])}))),e.onSubmit=function(){var t=Object(N.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.showSpinner=!0,e.forceUpdate(),t.prev=3,t.next=6,Object(A.b)("post","sign-up",Object(D.a)(Object(D.a)({},e.state),{},{email:e.props.match.params.id}));case 6:Object(B.b)(r.a.createElement("div",{className:"row spc-12",style:{maxWidth:"320px"}},r.a.createElement("div",{className:"col-12 h5"},"\u2713 Account Created"),r.a.createElement("div",{className:"col-12 h7 text-muted"},"Welcome to BBBook! Your account was created successfully. Please login to enter."),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},r.a.createElement("button",{onClick:function(){return Object(B.b)()}},"OK")))),e.props.history.replace("/login");case 8:return t.prev=8,e.showSpinner=!1,e.forceUpdate(),t.finish(8);case 12:console.log(e.state);case 13:case"end":return t.stop()}}),t,null,[[3,,8,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(O.a)(a,[{key:"render",value:function(){var e=this.onSubmit,t=this.showSpinner,a=this.state.email,n=this.context.version;return r.a.createElement("div",{id:"PageRegister",className:"pos-abs stretch-to-fit"},r.a.createElement("div",{className:"container row p-32"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"heading py-32"},"BBBook",r.a.createElement("sup",{className:"h7 normal-caps ml-8",style:{height:"auto"}},"Pre-Alpha ",n))),r.a.createElement(d.a,{disableTracksWidthCompensation:!0,className:"card main-card",style:{width:"360px"}},r.a.createElement("form",Object.assign({className:"row spc-16 f-vert col col-ext pos-rel trim"},{onSubmit:e}),r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"h7 text-muted"},"Complete your details.")),r.a.createElement("div",{className:"col"}),r.a.createElement("label",{className:"h7 mt-0 mb-m4"},"Email"),r.a.createElement("div",{className:"button outline"},a),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Username"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("username"),{name:"username",type:"text",autoComplete:"username"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"First Name"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("first_name"),{name:"first_name",type:"text",autoComplete:"given-name"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Last Name"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("last_name"),{name:"last_name",type:"text",autoComplete:"family-name"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Password"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("password"),{name:"password",type:"password",pattern:A.h,autoComplete:"new-password"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Confirm Password"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("password_2"),{name:"password_2",type:"password",pattern:A.h,autoComplete:"new-password"})),r.a.createElement("label",{required:!0,className:"h7 mt-0 mb-m4"},"Date of Birth"),r.a.createElement("input",Object.assign({required:!0},this.twoWayBind("birth_date"),{name:"birth_date",type:"date",autoComplete:"bday"})),r.a.createElement("label",{className:"h7 mt-0 mb-m4"},"Bio"),r.a.createElement("textarea",Object.assign({},this.twoWayBind("bio"),{name:"bio"})),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b text-right row f-vert spc-x-16 spc-y-12"},r.a.createElement("button",null,"Complete"),r.a.createElement("hr",{className:"col-ext-x"}),r.a.createElement(s.b,{to:"/login",className:"h7 text-right my-2"},"Have an account? Log in!"))))),r.a.createElement(g.a,{className:t?"active":""}))}}]),a}(M.a));I.contextType=A.a;a(155);var Y=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={publicPrivate:1,linkSharing:1,showSpinner:!1},e.onSubmit=function(){var t=Object(N.a)(E.a.mark((function t(a){var n,r,c,s,o,l,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props.match.params.id,r=e.context.userId,c=Object(D.a)(Object(D.a)({},y.a.omit(e.state,["publicPrivate","linkSharing","showSpinner"])),{},{group_type:e.stateToGroupType()}),e.setState({showSpinner:!0}),t.prev=5,"0"!==n){t.next=16;break}return c=Object(D.a)(Object(D.a)({},c),{},{group_members:[{user_id:r,member_type:"admin"}],books:[]}),t.next=10,Object(A.b)("post","group",c);case 10:s=t.sent,(o=s.data)&&Object(A.d)(["SET_DATA",o]),e.props.history.goBack(),t.next=21;break;case 16:return t.next=18,Object(A.b)("put","group",c);case 18:l=t.sent,(i=l.data)&&Object(A.d)(["SET_DATA",i]);case 21:return t.prev=21,e.setState({showSpinner:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[5,,21,24]])})));return function(e){return t.apply(this,arguments)}}(),e.archiveGroup=Object(N.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e,t){return Object(B.b)(r.a.createElement("div",{className:"row spc-12",style:{width:320}},r.a.createElement("div",{className:"col-12 h5"},"\uf071 Warning"),r.a.createElement("div",{className:"col-12 h7 text-muted"},"Do you want to archive this group? Archiving the group will prevent any public comments, questions, etc. to be posted."),r.a.createElement("div",{className:"bottom-row col-ext-x col-ext-b col-12 row spc-x-12 spc-y-8 f-justify-end"},r.a.createElement("button",{className:"outline",onClick:function(){Object(B.b)(),e()}},"Archive"),r.a.createElement("button",{onClick:function(){Object(B.b)(),t()}},"Cancel"))))}));case 2:return t.next=4,Object(A.b)("put","archive-group",{id:e.props.match.params.id,value:!0});case 4:a=t.sent,a.data;case 6:case"end":return t.stop()}}),t)}))),e.groupTypeToState=function(t){e.setState(Object(D.a)(Object(D.a)({},y.a.cloneDeep(t)),{},{publicPrivate:"public"===t.group_type?0:1,linkSharing:"private"!==t.group_type?0:1}))},e.stateToGroupType=function(){var t=e.state,a=t.publicPrivate,n=t.linkSharing;return 0===a?"public":0===n?"private-link":"private"},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.onSubmit,n=this.archiveGroup,c=this.props,A=c.location,l=c.history,i=this.state,m=i.publicPrivate,u=i.linkSharing,p=i.showSpinner,v=this.props.match.params.id,f=this.context,b=f.userId,h=f.GROUPS,E=f.USERS,N=h[v];if(!b)return null;if("0"!==v){if(!N)return null;this.state.id!==v&&this.groupTypeToState(N)}var w=-1!==A.pathname.indexOf("/edit-group-users");return r.a.createElement("div",{id:"ModalEditGroup",className:"modal active"},r.a.createElement("form",Object.assign({className:w?"expanded":""},{onSubmit:t}),r.a.createElement("div",{className:"row spc-12"},r.a.createElement("h3",{className:"col"},"0"===v?"New":"Edit"," Group"),r.a.createElement("hr",{className:"col-12 col-ext-x col-ext-b"})),w?r.a.createElement(d.a,{disableTracksWidthCompensation:!0,style:{height:"calc(100% - 114px)"}},r.a.createElement("div",{className:"row spc-12 container"},r.a.createElement("div",{className:"col-12 row f-center"},"Admins ",r.a.createElement("hr",{className:"col ml-16"})),r.a.createElement("div",{className:"col-12 row f-center f-order-1"},"Users ",r.a.createElement("hr",{className:"col ml-16"})),N.group_members.map((function(e){var t=E[e.user_id];return t?r.a.createElement("div",{key:e,className:"card col-3 row spc-12 f-center"+("admin"===e.member_type?"":" f-order-1")},r.a.createElement("img",{className:"card col-ext-y col-ext-l",src:a(40),style:{width:"61px",height:"61px",borderRadius:"8px 0 0 8px"},alt:"user profile pic"}),r.a.createElement("div",{className:"col one-line"},t.first_name||"First Name"," ",t.last_name||"Last Name",r.a.createElement("div",{className:"h7 text-muted mt-2"},"@",t.username," | ",t.email))):void 0})))):r.a.createElement("div",{className:"row spc-12"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{required:!0,className:"h7 mb-4"},"Group Name"),r.a.createElement("input",Object.assign({required:!0,className:"col-12",type:"text"},this.twoWayBind("title")))),r.a.createElement("div",{className:"col-12"},r.a.createElement("label",{className:"h7 mb-4"},"Group Description"),r.a.createElement("textarea",Object.assign({className:"col-12"},this.twoWayBind("bio")))),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"h7 mb-4"},"Group Privacy"),r.a.createElement(o.a,{value:m},r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({publicPrivate:0,linkSharing:0})}},"Public"),r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({publicPrivate:1})}},"Private"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"h7 mb-4",disabled:0===m},"Invite via Link"),r.a.createElement(o.a,{value:u,disabled:0===m},r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({linkSharing:0})}},"Enabled"),r.a.createElement("div",{className:"super-center",onClick:function(){return e.setState({linkSharing:1})}},"Disabled"))),"0"!==v?r.a.createElement("div",{className:"col-12 f-vert"},r.a.createElement("label",{className:"h7 mb-4"},"Link"),r.a.createElement(s.b,Object.assign({to:"/groups/group|"+v,target:"_blank",className:"col-12 button outline d-block one-line",type:"text"},this.twoWayBind("title")),window.location.origin+"/#/groups/group|"+v),r.a.createElement("div",{className:"button ml-auto h7 mt-6",style:{height:"auto"}},"Copy Link"),r.a.createElement("div",{className:"button outline row spc-12 mt-12",style:{height:"auto"}},r.a.createElement("div",{className:"col"},"Administrative actions"),r.a.createElement("div",{className:"button outline",onClick:n},"Archive Group"),r.a.createElement("div",{className:"button"},"Delete Group"))):void 0),r.a.createElement("div",{className:"bottom-row col-12 col-ext row spc-12"},"0"===v||w?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:A.pathname+"/edit-group-users",className:"button super-center"},"Manage Users"),r.a.createElement("div",{className:"f-self-center h7"},r.a.createElement("i",{className:"icon icon-users"})," ",null===N||void 0===N?void 0:N.group_members.length)),r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"button outline super-center",onClick:l.goBack},"Cancel"),r.a.createElement("button",null,"0"===v?"Create Group":"Save")),r.a.createElement(g.a,{className:p?"active":""}),r.a.createElement("div",{className:"close-btn",onClick:l.goBack})))}}]),n}(M.a);Y.contextType=A.a;a(156);var L,T=Object(l.b)(Object(l.a)(A.a,["userId","GROUPS","USERS","BOOKS"],Object(n.memo)((function(e){var t,o=e.userId,l=e.GROUPS,i=e.USERS,m=e.BOOKS,p=e.params;Object(n.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[p.id+o]);var f=l[p.id],b=(i[o],Object(n.useState)(!0)),h=Object(u.a)(b,2),w=h[0],O=h[1],j="admin"===(null===f||void 0===f||null===(t=f.group_members.find((function(e){return e.user_id===o})))||void 0===t?void 0:t.member_type),x=Object(c.g)().pathname;function S(){return(S=Object(N.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==o){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.prev=3,e.next=6,Object(A.b)("get","group-full/"+p.id);case 6:t=e.sent,(a=t.data)&&Object(A.d)(["SET_DATA",a]);case 9:return e.prev=9,O(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return r.a.createElement(d.a,{disableTracksWidthCompensation:!0,id:"PageGroup"},f?r.a.createElement("div",{className:"container"},r.a.createElement("img",{className:"well",src:a(68),alt:"banner"}),r.a.createElement("div",{className:"p-12"},r.a.createElement("h3",{className:"col-12 one-line"},f.title),r.a.createElement("div",{className:"col-12 text-muted h7"},f.bio)),r.a.createElement("hr",{style:{transform:"rotate(180deg)"}}),r.a.createElement("div",{className:"row spc-x-12 f-center"},r.a.createElement(P,{value:1,className:"col-ext-x"},r.a.createElement("div",null,"Updates"),r.a.createElement("div",null,"Book Shelves"),r.a.createElement("div",null,"Members"),r.a.createElement("div",null,"Notifications"),r.a.createElement("div",null,"Settings")),r.a.createElement("div",{className:"col"}),r.a.createElement("input",{type:"search",className:"col-4"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"row row-8 spc-24"},f.book_ids.map((function(e){var t=m[e];return t?r.a.createElement(s.b,{to:x+"/book|"+t.id,className:"col-1"},r.a.createElement(v,{thumbnail:t.thumbnail}),r.a.createElement("div",{className:"pt-8"},r.a.createElement("div",{className:"one-line"},t.title),r.a.createElement("div",{className:"h7 text-muted one-line"},t.description))):null})),j?r.a.createElement(s.b,{className:"col-1",to:x+"/edit-book|".concat(f.id,"|0")},r.a.createElement(v,{className:"col-12"},r.a.createElement("h3",{className:"super-center text-muted"},r.a.createElement("div",{className:"fa fa-plus"}))),r.a.createElement("div",{className:"pt-8"},r.a.createElement("div",{className:"one-line"},"Add Book"),r.a.createElement("div",{className:"h7 text-muted one-line"},"Upload a new PDF"))):void 0)):void 0,r.a.createElement(g.a,{className:w?"active":""}))})))),z=(a(157),a(32)),H=a(25),U=a(15),R=Object(l.a)(A.a,["GROUPS"],Object(n.memo)((function(e){var t,a=e.match,c=e.history,s=e.GROUPS,o=Object(U.c)({showSpinner:!1}),l=a.params,i=l.id,m=l.groupId,p=Object(n.useState)(),v=Object(u.a)(p,2),f=v[0],b=v[1],h=Object(n.useRef)();return r.a.createElement("div",{id:"ModalEditBook",className:"modal active"},r.a.createElement("form",Object.assign({action:"",className:"row"},{onSubmit:function(e){return O.apply(this,arguments)},ref:h}),f?r.a.createElement(d.a,{className:"col-6 uploaded-book",disableTracksWidthCompensation:!0},r.a.createElement("div",{className:"row spc-12"},r.a.createElement("div",{className:"one-line col-12"},f.name),r.a.createElement("div",{className:"col-12 h8 mt-0 text-muted"},f.pages.length," pages"),r.a.createElement("hr",{className:"col-12"}),f.pages.map((function(e,t){return r.a.createElement(z.a,Object.assign({key:t},{page:e,viewport:f.viewports[t],className:"col-4"}))})))):r.a.createElement("label",{className:"col-6 p-12 upload-book super-center f-vert text-muted"},r.a.createElement("i",{className:"icon icon-upload h1"}),r.a.createElement("div",{className:"mt-4 h7"},"Upload"),r.a.createElement("input",Object.assign({type:"file",className:"h3 hide",name:"file",accept:".pdf"},{onChange:function(e){return w.apply(this,arguments)}}))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",null,r.a.createElement("h3",{className:"p-12 pb-0"},"0"===i?"New":"Edit"," Book"),r.a.createElement("div",{className:"p-12 pt-0 h7 text-muted"},"Group: ",null===(t=s[m])||void 0===t?void 0:t.title),r.a.createElement("hr",null)),r.a.createElement("div",{className:"row spc-12 f-vert"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{required:!0,className:"h7 mb-4"},"Title"),r.a.createElement("input",{required:!0,className:"col-12",type:"text",name:"title"})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h7 mb-4"},"Authors"),r.a.createElement("input",{className:"col-12",type:"text",name:"author_name"})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h7 mb-4"},"Book ISBN"),r.a.createElement("input",{className:"col-12",type:"text",name:"isbn"})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h7 mb-4"},"Description"),r.a.createElement("textarea",{className:"col-12",name:"description"}))),r.a.createElement("div",{className:"bottom-row col-12 col-ext row spc-12"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"button outline super-center",onClick:c.goBack},"Cancel"),f?r.a.createElement("button",null,"0"===i?"Create PageBook":"Save"):void 0)),r.a.createElement(g.a,{className:o.showSpinner?"active":""}),r.a.createElement("div",{className:"close-btn",onClick:c.goBack})));function w(){return(w=Object(N.a)(E.a.mark((function e(t){var a,n,r,c,A,s,o,l,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.files[0].name,""===h.current.title.value&&(h.current.title.value=n.slice(0,-4)),e.next=5,Object(H.b)(a.files[0]);case 5:return r=e.sent,(c=z.c.getDocument(r)).onProgress=function(e){var t=e.loaded,a=e.total;return console.log(t/a*100)},e.next=10,c.promise;case 10:for(A=e.sent,s=new Array(A.numPages),o=0;o<s.length;++o)s[o]=A.getPage(o+1);return e.next=15,Promise.all(s);case 15:l=e.sent,(i=l.map((function(e){return e.getViewport({scale:.25})})))[0]=l[0].getViewport({scale:.75}),b({pdf:A,pages:l,viewports:i,name:n,data:r});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(N.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,j(!0),a=Object(D.a)(Object(D.a)({},y.a.mapValues(y.a.pick(t.target,["title","author_name","description","isbn"]),(function(e){return e.value}))),{},{group_id:m,file:f.data,thumbnail:t.target.querySelector(".uploaded-book img").src}),e.next=6,Object(A.b)("POST","book",a);case 6:n=e.sent,(r=n.data)&&Object(A.d)(["SET_DATA",r]),c.goBack();case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,,10,13]])})))).apply(this,arguments)}function j(e){o.showSpinner=e;var t=h.current.querySelector(".spinner");e?t.classList.add("active"):t.classList.remove("active")}})));t.a=Object(c.i)((function(e){var t=e.location,a=e.history;return console.log("App render"),L=Object(U.a)(),"/"===t.pathname&&a.replace("/groups"),A.i||-1!==t.pathname.indexOf("/login")||a.replace(t.pathname+"/login"),r.a.createElement("div",{id:"App"},r.a.createElement(m,null),r.a.createElement("div",{id:"main-content",className:"pos-abs stretch-to-fit"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"*/group|:id",component:T}),r.a.createElement(c.a,{path:"/groups",component:W})),r.a.createElement(c.a,{path:"*/edit-group/:id",component:Y})),r.a.createElement(c.a,{path:"*/book|:bookId",children:r.a.createElement(b.e,null)}),r.a.createElement(c.a,{path:"*/edit-book|:groupId|:id",component:R}),r.a.createElement(c.a,{path:"*/login",component:k}),r.a.createElement(c.a,{path:"*/login-register/:id",component:I}),r.a.createElement("div",{id:"shield",className:"hide pos-abs stretch-to-fit",onClick:function(){return Object(A.d)(["SET_UI_SIDEMENU",!1])}}),r.a.createElement(B.a,null))}))},,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABLAAAAGQCAYAAAC+tZleAAAEuGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjEyMDAiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0MDAiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdpZHRoPSIxMjAwIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0MDAiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLjAiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLjAiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDItMDRUMDY6NDI6MzgtMDg6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDItMDRUMDY6NDI6MzgtMDg6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMS44LjUiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDItMDRUMDY6NDI6MzgtMDg6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PiSHzzAAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRzytEURTHPzNGxIhioVhMGlZDfpTYWMzkV2Ex85Rfm5lnfqh54/XemzTZKtspSmz8WvAXsFXWShEp2SlrYoOe8zw1krm3e8/nfu85p3PPBa+SVTXT1w1azjKio+HAzOxcoOoRLz6ZfbTEVVOfjI0olB1vN3gce9Xp5Crv9++oXUyaKniqhYdU3bCEx4QnVizd4U3hJjUTXxQ+Fg4ZUqDwtaMnXH5yOO3yh8OGEo2At0E4kP7FiV+sZgxNWF5OUMvm1Z96nJf4k7npmNg2Wa2YRBklTIBxhonQTw+DsvfTSS9dcqJMfPd3/BTLEqvKrlPAYIk0GSxCouYle1JsSvSkzCwFp/9/+2qm+nrd7P4wVD7Y9ks7VG3AZ9G23/dt+/MAKu7hLFeKX96DgVfRiyUtuAv1a3ByXtISW3C6Ds13etyIf0sVsrypFDwfQd0sNF5Czbzbs597Dm9BWZWvuoDtHegQ//qFL1MWZ91V/LEXAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHXElEQVR4nO3BMQEAAADCoPVPbQsvoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICXAU9DAAHmV7+4AAAAAElFTkSuQmCC"},,,function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(6),c=a(0),A=a.n(c),s=a(8),o=a.n(s),l=a(13),i=a.n(l),m=a(11),u=a(24),d=a(18),p=Object(r.a)(d.a,["setSidebarMode","categorized","pageWiseComments","pdf","BookContextLocal"],Object(c.memo)((function(e){var t=e.sidebarMode,a=e.setSidebarMode,r=e.categorized,s=e.pageWiseComments,l=e.pdf,p=e.BookContextLocal,v=Object(c.useState)(!1),f=Object(n.a)(v,2),g=f[0],b=f[1],h=0,E=o.a.mapValues(s,(function(e){return e.filter((function(e){var a=e.comment_type===t;return a&&++h,a}))})),N=h,w=0;return p.pageWiseCommentsBefore=[],p.pageWiseCommentsAfter=[],A.a.createElement("div",{className:"RightSidebar row pos-rel p-12 pl-0 mode-".concat(t)},A.a.createElement("div",{className:"vertical-tabs f-vert"},A.a.createElement("div",{className:"col",style:{maxHeight:"14px"}}),A.a.createElement("div",{className:"question"===t?"active":"",onClick:function(){return a("question")}},A.a.createElement("img",{src:i.a,alt:""}),A.a.createElement("div",{className:"vertical-text px-4"},"Questions ",A.a.createElement("span",{className:"h7"},r.question.length)),A.a.createElement("img",{src:i.a,alt:""})),A.a.createElement("div",{className:"comment"===t?"active":"",onClick:function(){return a("comment")}},A.a.createElement("img",{src:i.a,alt:""}),A.a.createElement("div",{className:"vertical-text px-4"},"Comments ",A.a.createElement("span",{className:"h7"},r.comment.length)),A.a.createElement("img",{src:i.a,alt:""})),A.a.createElement("span",{className:"col"})),A.a.createElement("div",{className:"col trim"},A.a.createElement(m.a,{disableTracksWidthCompensation:!0},A.a.createElement("div",{className:"py-6 f-vert"},o.a.map(E,(function(e,t){for(var a=h-N,n=w;n<t;++n)p.pageWiseCommentsBefore[n]=a,p.pageWiseCommentsAfter[n]=N;if(w=t,e.length)return p.pageWiseCommentsBefore[t]=a,N-=e.length,p.pageWiseCommentsAfter[t]=N,A.a.createElement(d.d,Object.assign({p:e,i:t},{key:t}));p.pageWiseCommentsBefore[t]=a,p.pageWiseCommentsAfter[t]=N})),function(){for(var e=h-N,t=w;t<(null===l||void 0===l?void 0:l.pages.length);++t)p.pageWiseCommentsBefore[t]=e,p.pageWiseCommentsAfter[t]=N}(),A.a.createElement("hr",{className:"mx-12"}),A.a.createElement("div",{style:{height:"28px"}}),A.a.createElement("div",{className:"pos-sty top-controls f-order-m1 f-vert mt-m6"},A.a.createElement("div",{className:"row spc-12 f-vert"},A.a.createElement(u.a,{value:+g},A.a.createElement("div",{className:"super-center capitalize",onClick:function(){return b(!1)}},"All ",t,"s"),A.a.createElement("div",{className:"super-center capitalize",onClick:function(){return b(!0)}},"My ",t,"s")),A.a.createElement("input",{type:"text",placeholder:" \uf002  Filter"})," "),A.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7"}," ".concat(t),"s above",A.a.createElement("i",{className:"icon-chevron_up icon px-4"}))))),A.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7 bottom"}," ".concat(t),"s below",A.a.createElement("i",{className:"icon-chevron_down icon px-4"}))))})));t.default=p},,,function(e,t,a){e.exports=a(158)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/spinner.3d035a55.gif"},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";a.r(t);a(47);var n=a(0),r=a.n(n),c=a(11),A=(a(149),a(25)),s=a(18),o=a(15),l=a(6);t.default=Object(l.a)(s.a,["pdf","pageWiseComments","setVisiblePages","setSelection","setBubblePos"],Object(n.memo)((function(e){var t,a=e.pdf,l=e.pageWiseComments,i=e.setVisiblePages,m=e.setSelection,u=e.setBubblePos,d=Object(o.c)({pageTops:[],pageBottoms:[],loaders:[],prevTopLoadedPage:void 0,prevBottomLoadedPage:void 0,prevTopPage:void 0,prevBottomPage:void 0}),p=Object(n.useRef)();return Object(n.useEffect)((function(){var e=p.current.children;d.pageTops=[],d.pageBottoms=[];for(var t=0;t<e.length;++t){var a=e[t],n=a.offsetTop,r=a.offsetHeight;d.pageTops[t]=n,d.pageBottoms[t]=n+r}p.current.closest(".ScrollbarsCustom-Scroller").scrollTo(0,1)}),[a]),r.a.createElement(c.a,Object.assign({disableTracksWidthCompensation:!0,className:"PdfVerticalScroll"},{onScroll:function(e){var t=d.pageBottoms.length-1,a=e.scrollTop-e.clientHeight,n=e.scrollTop+(e.clientHeight<<1),r=Object(A.a)(d.pageTops,a);a<d.pageTops[r]&&(r=Math.max(--r,0));var c=Object(A.a)(d.pageBottoms,n);n>d.pageBottoms[c]&&(c=Math.min(++c,t));if(void 0===d.prevTopLoadedPage&&void 0===d.prevBottomLoadedPage){for(var s=r;s<=c;++s)d.loaders[s](!0);d.prevTopLoadedPage=r,d.prevBottomLoadedPage=c}if(d.prevTopLoadedPage!==r){for(var o=r-1;o>=d.prevTopLoadedPage;--o)d.loaders[o](!1);for(var l=r;l<=d.prevTopLoadedPage;++l)d.loaders[l](!0);d.prevTopLoadedPage=r}if(d.prevBottomLoadedPage!==c){for(var m=c+1;m<=d.prevBottomLoadedPage;++m)d.loaders[m](!1);for(var u=c;u>=d.prevBottomLoadedPage;--u)d.loaders[u](!0);d.prevBottomLoadedPage=c}var p=e.scrollTop,v=e.scrollTop+e.clientHeight,f=Object(A.a)(d.pageTops,p);p<d.pageTops[f]&&(f=Math.max(--f,0));var g=Object(A.a)(d.pageBottoms,v);v>d.pageBottoms[g]&&(g=Math.min(++g,t));d.prevTopPage===f&&d.prevBottomPage===g||(i(f,g),d.prevTopPage=f,d.prevBottomPage=g)}}),r.a.createElement("div",Object.assign({className:"row f-center f-vert p-6"},{onClick:function(){try{var e=window.getSelection();if(""===e.toString())throw new Error("No text selected");for(var t=e.anchorNode,a=e.focusNode;!t.closest;)t=t.parentNode;for(;!a.closest;)a=a.parentNode;var n=t.closest("span"),r=a.closest("span"),c={startPage:+t.closest(".Page").dataset.pageIndex,startLine:Object(A.c)(n),startOffset:Object(A.d)(t,n,e.anchorOffset),endPage:+a.closest(".Page").dataset.pageIndex,endLine:Object(A.c)(r),endOffset:Object(A.d)(a,r,e.focusOffset)};(c.endPage<c.startPage||c.endPage===c.startPage&&(c.endLine<c.startLine||c.endLine===c.startLine&&c.endOffset<c.startOffset))&&(c={startPage:c.endPage,startLine:c.endLine,startOffset:c.endOffset,endPage:c.startPage,endLine:c.startLine,endOffset:c.startOffset});var s=Array.from(p.current.children).slice(c.startPage,c.endPage+1);if(1!==s.length)throw new Error("Multi-page selection disabled");c=[{page:c.startPage,startLine:c.startLine,startOffset:c.startOffset,endLine:c.endLine,endOffset:c.endOffset}];var o=a.getBoundingClientRect(),l=a.closest(".ScrollbarsCustom-Scroller");console.log(c),m({type:"text",text:e.toString(),data:c}),u({top:o.top+o.height+l.scrollTop})}catch(i){console.log(i),m(void 0),u({})}},ref:p}),null===a||void 0===a||null===(t=a.pages)||void 0===t?void 0:t.map((function(e,t){var n=a.viewports[t];return r.a.createElement("div",{className:"p-6",key:t},r.a.createElement(s.c,{page:e,viewport:n,i:t,pageComments:l[t],loaders:d.loaders}))}))),r.a.createElement(s.b,null))})))},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),c=a.n(r),A=a(8),s=a.n(A),o=a(13),l=a.n(o),i=a(11),m=a(4),u=a(18),d=a(33),p=a(1),v=Object(n.a)(u.a,["setSidebarMode","categorized","pageWiseComments","userId","pdf","BookContextLocal"],Object(r.memo)((function(e){var t=e.setSidebarMode,a=e.categorized,n=e.pageWiseComments,r=e.userId,A=(e.pdf,e.BookContextLocal);s.a.mapValues(n,(function(e){return e.filter((function(e){var t="note"===e.comment_type&&e.user_id===r;return t&&0,t}))}));return A.pageWiseCommentsBefore=[],A.pageWiseCommentsAfter=[],c.a.createElement("div",{className:"RightSidebar row pos-rel p-12 pl-0 mode-note"},c.a.createElement("div",{className:"vertical-tabs f-vert"},c.a.createElement("div",{className:"col",style:{maxHeight:"14px"}}),c.a.createElement("div",{className:"active",onClick:function(){return t("note")}},c.a.createElement("img",{src:l.a,alt:""}),c.a.createElement("div",{className:"vertical-text px-4"},"Notes ",c.a.createElement("span",{className:"h7"},a.note.length)),c.a.createElement("img",{src:l.a,alt:""})),c.a.createElement("div",{onClick:function(){return t("highlight")}},c.a.createElement("img",{src:l.a,alt:""}),c.a.createElement("div",{className:"vertical-text px-4"},"Highlights ",c.a.createElement("span",{className:"h7"},a.highlight.length)),c.a.createElement("img",{src:l.a,alt:""})),c.a.createElement("span",{className:"col"})),c.a.createElement("div",{className:"col trim"},c.a.createElement(i.a,{disableTracksWidthCompensation:!0},c.a.createElement("div",{className:"py-6 row spc-12"},a.note.map((function(e){return c.a.createElement("div",{className:"col-6"},c.a.createElement(d.a,{key:e.id,commentId:e.id}))})),c.a.createElement("div",{className:"col-12",style:{height:"72px"}}),c.a.createElement("div",{className:"col-12 pos-sty top-controls f-order-m1 f-vert col-ext-x col-ext-t"},c.a.createElement("div",{className:"row spc-12 f-vert"},c.a.createElement("input",{type:"text",placeholder:" \uf002  Filter"})," ")))),c.a.createElement(m.b,{to:p.e.location.pathname+"/new-comment",className:"add-note fa fa-plus button pos-abs super-center"})))})));t.default=v},function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),c=a.n(r),A=a(8),s=a.n(A),o=a(13),l=a.n(o),i=a(11),m=a(18),u=Object(n.a)(m.a,["setSidebarMode","categorized","pageWiseComments","userId","pdf","BookContextLocal"],Object(r.memo)((function(e){var t=e.setSidebarMode,a=e.categorized,n=e.pageWiseComments,r=e.userId,A=e.pdf,o=e.BookContextLocal,u=0,d=s.a.mapValues(n,(function(e){return e.filter((function(e){var t="highlight"===e.comment_type&&e.user_id===r;return t&&++u,t}))})),p=u,v=0;return o.pageWiseCommentsBefore=[],o.pageWiseCommentsAfter=[],c.a.createElement("div",{className:"RightSidebar row pos-rel p-12 pl-0 mode-highlight"},c.a.createElement("div",{className:"vertical-tabs f-vert"},c.a.createElement("div",{className:"col",style:{maxHeight:"14px"}}),c.a.createElement("div",{onClick:function(){return t("note")}},c.a.createElement("img",{src:l.a,alt:""}),c.a.createElement("div",{className:"vertical-text px-4"},"Notes ",c.a.createElement("span",{className:"h7"},a.note.length)),c.a.createElement("img",{src:l.a,alt:""})),c.a.createElement("div",{className:"active",onClick:function(){return t("highlight")}},c.a.createElement("img",{src:l.a,alt:""}),c.a.createElement("div",{className:"vertical-text px-4"},"Highlights ",c.a.createElement("span",{className:"h7"},a.highlight.length)),c.a.createElement("img",{src:l.a,alt:""})),c.a.createElement("span",{className:"col"})),c.a.createElement("div",{className:"col trim"},c.a.createElement(i.a,{disableTracksWidthCompensation:!0},c.a.createElement("div",{className:"py-6 f-vert"},s.a.map(d,(function(e,t){for(var a=u-p,n=v;n<t;++n)o.pageWiseCommentsBefore[n]=a,o.pageWiseCommentsAfter[n]=p;if(v=t,e.length)return o.pageWiseCommentsBefore[t]=a,p-=e.length,o.pageWiseCommentsAfter[t]=p,c.a.createElement(m.d,Object.assign({p:e,i:t},{key:t}));o.pageWiseCommentsBefore[t]=a,o.pageWiseCommentsAfter[t]=p})),function(){for(var e=u-p,t=v;t<(null===A||void 0===A?void 0:A.pages.length);++t)o.pageWiseCommentsBefore[t]=e,o.pageWiseCommentsAfter[t]=p}(),c.a.createElement("hr",{className:"mx-12"}),c.a.createElement("div",{style:{height:"28px"}}),c.a.createElement("div",{className:"pos-sty top-controls f-order-m1 f-vert mt-m6"},c.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7"}," highlight","s above",c.a.createElement("i",{className:"icon-chevron_up icon px-4"}))))),c.a.createElement("div",{className:"mx-auto pill my-8 px-10 py-2 h7 bottom"}," highlight","s below",c.a.createElement("i",{className:"icon-chevron_down icon px-4"}))))})));t.default=u},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(42),A=a.n(c),s=a(4),o=(a(79),a(46)),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var m=a(1);A.a.render(r.a.createElement(s.a,null,r.a.createElement(m.c,null,r.a.createElement(o.a,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()}],[[74,1,2]]]);
//# sourceMappingURL=main.3db21c3a.chunk.js.map